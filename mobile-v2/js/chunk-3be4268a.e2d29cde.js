(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be4268a"],{"0571":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pdd-exchange",on:{"!click":function(e){return t.clickHandler(e)}}},[i("div",{staticClass:"back",on:{click:t.backHandler}}),i("exchange",{attrs:{options:t.options,"count-down":t.countDownTime,number:t.number,coin:t.currentCoin,install:t.hasPinduoduo()},on:{showdialog:t.dialogHandler}}),i("goods-list",{attrs:{goods:t.goods,options:t.options},on:{showdialog:t.dialogHandler}}),i("pdd-dialog",{attrs:{show:t.dialogType,data:t.dialogData,url:t.turnTableUrl,install:t.hasPinduoduo()},on:{close:t.closeDialog}}),t.backDialogShow?i("BackDialog",{attrs:{page:"金币兑换现金券",url:"bikan://web.goto/commonWebView?url_encode=https%3A%2F%2Ffeed.browser.miui.com%2Fmobile-v2%2Fact%2FpddCooperation"},on:{close:function(e){t.backDialogShow=!1}}}):t._e()],1)},o=[],a=i("edb0"),n=i("42a5"),c=i("6b43"),r=i("58c4"),l=(i("e6cf"),i("0c6d"));function d(){return l["b"].get("/api/v4/pinduoduo/baseinfo").then(t=>200!==t.data.status?(Object(l["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l["b"].post("/api/v4/pinduoduo/exchange",t).then(t=>200!==t.data.status?(Object(l["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}var u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.goods&&t.goods.length?i("div",{staticClass:"list"},[i("p",{staticClass:"list__title"},[t._v("商品样例")]),i("div",{staticClass:"list__wrap"},t._l(t.goods,(function(e,s){return i("div",{key:s,staticClass:"item",attrs:{link:e.linkUrl},on:{click:function(i){return t.clickItem(e)}}},[i("img",{attrs:{src:e.imgUrl,alt:""}}),i("div",{staticClass:"item__title"},[t._v(t._s(e.name))]),i("div",{staticClass:"item__info"},[i("div",{staticClass:"desc"},[t._v(" = "),i("span",{staticClass:"desc__before"},[i("span",[t._v("原价")]),i("i",[t._v(" ¥")]),t._v(t._s(t.getOriginalPrice(e.originalPrice))+" ")]),t._v(" - "),i("span",{staticClass:"desc__discount"},[i("span",[t._v("现金券")]),i("i",[t._v(" ¥")]),t._v(t._s(e.discount)+" ")])]),i("div",{staticClass:"price"},[i("span",{staticClass:"price__title"},[t._v("券后价")]),i("span",{staticClass:"price__content"},[i("i",[t._v("¥")]),t._v(t._s(t.getPrice(e.originalPrice,e.discount))+" ")])])])])})),0),i("div",{staticClass:"list__footer"},[i("div",{staticClass:"button",on:{click:t.clickButton}},[i("p",[t._v("兑换查看全部 >")])])])]):t._e()},p=[],v=(i("b680"),{name:"GoodsList",props:{goods:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]}},methods:{getOriginalPrice(t){return t.toFixed(1)},getPrice(t,e){var i=this.getOriginalPrice(t),s=i-e;return 10*s%10>0&&(s=s.toFixed(2)),s},clickItem(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=20===t.discount?1:0;this.options[e]&&(this.options[e].redeemed?Object(a["A"])(t.linkUrl):(t.cash=this.options[e].cash,t.coin=this.options[e].coin,this.$emit("showdialog",t)),this.$o2o({e_c:"商品详情点击",e_a:"点击",e_n:"金币兑换现金券",e_x:{keyword:"".concat(t.discount,"元")}}))},clickButton(){this.options[0]&&!this.options[0].redeemed?this.$emit("showdialog",this.options[0]):this.options[1]&&!this.options[1].redeemed?this.$emit("showdialog",this.options[1]):this.options[0]&&Object(a["A"])(this.options[0].uninstalledUrl),this.$o2o({e_c:"底部按钮点击",e_a:"点击",e_n:"金币兑换现金券"})}}}),_=v,g=(i("776e"),i("2877")),m=Object(g["a"])(_,u,p,!1,null,"08045422",null),b=m.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.options&&t.options.length?i("div",{staticClass:"exchange"},[i("div",{staticClass:"hint"},[i("div",{staticClass:"hint-text"},[i("span",[t._v("今日优惠倒计时")]),i("pdd-countdown",{attrs:{time:t.countDown,"is-stop":!0},on:{stop:function(e){return t.$emit("stop")}}}),i("span",[t._v("已有"+t._s(t.people)+"人兑换使用")])],1)]),i("div",{staticClass:"coupon-list"},t._l(t.options,(function(e,s){return i("div",{key:s,staticClass:"coupon coupon-breath",class:"coupon-"+s,on:{click:function(i){return t.clickCoupon(e)}}},[e.redeemed?i("div",[i("div",{staticClass:"seal"}),i("div",{staticClass:"button redeemed"},[t._v(" 去使用 ")])]):i("div",[t._m(0,!0)])])})),0),t._m(1)]):t._e()},w=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"button"},[t._v(" 立即"),i("br"),t._v("兑换 ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rules"},[t._v(" 1、金币兑换的现金券，可用于[拼多多]APP购买商品使用，跳转后需登录领取； "),i("br"),t._v(" 2、每天仅能兑换"),i("span",[t._v("1次")]),t._v("，且需在"),i("span",[t._v("2小时")]),t._v("内使用，过期将不能使用； "),i("br"),t._v(" 3、现金券一经兑换，不可退换哦。 ")])}],k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.countDownTime>=0?i("div",{staticClass:"pdd-countdown"},[i("span",[i("span",[t._v(t._s(("0"+t.hours).slice(-2)))]),t._v(" : ")]),i("span",[i("span",[t._v(t._s(("0"+t.minutes).slice(-2)))]),t._v(" : ")]),i("span",[i("span",[t._v(t._s(("0"+t.seconds).slice(-2)))]),t._v(" . ")]),i("span",[i("span",[t._v(t._s(t.decimal))])])]):t._e()},y=[],C={name:"PddCountdown",props:{time:{type:Number,required:!0,default:6048e5},isStop:{type:Boolean,default:!1}},data(){return{D:864e5,H:36e5,M:6e4,S:1e3,SS:100,intervalId:0,countDownTime:0,previousTime:Date.now()}},computed:{days(){var t=Math.floor(this.countDownTime/this.D);return t>=0?t:0},hours(){var t=Math.floor((this.countDownTime-this.days*this.D)/this.H);return t>=0?t:0},minutes(){var t=Math.floor((this.countDownTime-this.days*this.D-this.hours*this.H)/this.M);return t>=0?t:0},seconds(){var t=Math.floor((this.countDownTime-this.days*this.D-this.hours*this.H-this.minutes*this.M)/this.S);return t>=0?t:0},decimal(){var t=Math.floor((this.countDownTime-this.days*this.D-this.hours*this.H-this.minutes*this.M-this.seconds*this.S)/this.SS);return t>=0?t:0}},watch:{time:{handler(t){t?setTimeout(()=>{this.countDownTime=t,this.intervalId=setInterval(this.tick,100)},0):clearInterval(this.intervalId)},immediate:!0}},destoryed(){clearInterval(this.intervalId)},methods:{tick(){var t=Date.now(),e=t-this.previousTime;this.countDownTime=this.countDownTime-e,this.previousTime=t,this.isStop&&(this.countDownTime<100&&this.countDownTime>0||this.countDownTime<0&&this.countDownTime>-100)&&(this.$emit("stop"),clearInterval(this.intervalId)),this.countDownTime<0&&(this.countDownTime=0)}}},D=C,x=(i("c1fd"),Object(g["a"])(D,k,y,!1,null,"549e31b5",null)),$=x.exports,T={name:"Exchange",props:{options:{type:Array,default:()=>[]},countDown:{type:Number,default:0},number:{type:Number,default:0},install:{type:Boolean,default:!1}},components:{PddCountdown:$},computed:{people(){return this.number>=1e4?"".concat((this.number/1e4).toFixed(1),"万"):this.number}},methods:{clickCoupon(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.redeemed?(this.install?location.href=t.installedUrl:Object(a["A"])(t.uninstalledUrl),this.$o2o({e_c:"".concat(t.cash,"元券使用"),e_a:"点击",e_n:"金币兑换现金券"})):(this.$emit("showdialog",t),this.$o2o({e_c:"".concat(t.cash,"元券兑换"),e_a:"点击",e_n:"金币兑换现金券"}))}}},O=T,j=(i("4985"),Object(g["a"])(O,f,w,!1,null,"227b276e",null)),S=j.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data&&t.data.cash?i("gray-mask",{attrs:{show:!!t.show}},[i("div",{staticClass:"dialog"},[i("div",{staticClass:"close",on:{click:t.clickClose}}),"exchange"===t.show?i("div",[i("div",{staticClass:"title"},[t._v("兑换确认")]),i("div",{staticClass:"desc"},[t._v("即将兑换限时"+t._s(t.data.cash)+"元现金券，仅需0.1折（"+t._s(t.data.coin)+"金币），点击兑换按钮立即去使用现金券。")]),i("div",{staticClass:"button",on:{click:t.clickExchange}},[t._v(" 立即兑换使用 ")])]):i("div",[i("div",{staticClass:"title"},[t._v("金币不足")]),i("div",{staticClass:"desc"},[t._v("呀，账户金币不足，暂时无法兑换高额优惠券。推荐使用大转盘抽奖功能，领取金币和小额度优惠券再兑换。")]),i("div",{staticClass:"button",on:{click:t.gotoTurn}},[t._v(" 去转盘抽免单 ")])])])]):t._e()},P=[],H=i("a1ba"),F={components:{GrayMask:H["a"]},props:{show:{type:[String,Boolean],default:""},data:{type:Object,default:()=>{}},url:{type:String,default:""},install:{type:Boolean,default:!1}},methods:{gotoTurn(){this.$o2o({e_c:"去大转盘按钮",e_a:"点击",e_n:"金币兑换现金券",e_x:{keyword:"".concat(this.data&&this.data.cash,"元")}}),location.href=this.url,this.$emit("close")},clickClose(){this.$emit("close"),this.$o2o({e_c:"exchange"===this.show?"兑换确认弹窗":"金币不足弹窗",e_a:"关闭",e_n:"金币兑换现金券",e_x:{keyword:"".concat(this.data&&this.data.cash,"元")}})},clickExchange(){var t=10===this.data.cash?1:2;h({type:t}).then(()=>{this.data.linkUrl?Object(a["A"])(this.data.linkUrl):this.install?location.href=this.data.installedUrl:Object(a["A"])(this.data.uninstalledUrl),this.$emit("close")}).catch(()=>{Object(a["H"])("领取失败，请重试")}),this.$o2o({e_c:"兑换并使用按钮",e_a:"点击",e_n:"金币兑换现金券",e_x:{keyword:"".concat(this.data&&this.data.cash,"元"),status:this.install?"已安装":"未安装"}})}}},A=F,L=(i("df77"),Object(g["a"])(A,E,P,!1,null,"950c0af6",null)),U=L.exports,I="pddExchange-backdialog",M={name:"PddExchange",components:{GoodsList:b,Exchange:S,PddDialog:U,BackDialog:r["a"]},data(){return{isLogin:!1,currentCoin:0,countDownTime:0,number:0,turnTableUrl:"https://feed.browser.miui.com/mobile-v2/act/pddCooperation",options:[],goods:[],pinduoduo:"com.xunmeng.pinduoduo",dialogType:"",dialogData:{},backDialogShowed:"true"===Object(c["d"])(I),backDialogShow:!1}},mounted(){Object(n["a"])("backKey",this.backKeyHandler),Object(a["z"])(!0)},methods:{login(){try{Object(a["h"])("pddExchangeLoginCallback")}catch(t){console.log(t)}},hasPinduoduo(){return Object(a["k"])(this.pinduoduo)>0},getData(){d().then(t=>{this.currentCoin=t.currentCoin||0,this.countDownTime=t.remainingTime,this.number=t.number,this.turnTableUrl=t.turnTableUrl,this.options=t.options,this.goods.length||(this.goods=t.goods),this.isLogin=t.login,this.isLogin||this.login(),this.$root.hidePlaceholder()}).catch(()=>{this.$error()})},closeDialog(){this.dialogType=""},clickHandler(t){this.isLogin||(t.stopPropagation(),this.login())},dialogHandler(t){this.dialogData=t,this.currentCoin>=t.coin?(this.dialogType="exchange",this.$o2o({e_c:"兑换确认弹窗",e_a:"曝光",e_n:"金币兑换现金券",e_x:{keyword:"".concat(t.cash,"元")}})):(this.dialogType="toturn",this.$o2o({e_c:"金币不足弹窗",e_a:"曝光",e_n:"金币兑换现金券",e_x:{keyword:"".concat(t.cash,"元")}}))},focusHandler(){this.isLogin&&this.getData()},backHandler(){this.$o2o({e_c:"返回按钮",e_a:"点击",e_n:"金币兑换现金券"}),this.backKeyHandler()},backKeyHandler(){this.dialogType?this.closeDialog():this.backDialogShowed?this.backDialogShow?this.backDialogShow=!1:Object(a["D"])():(Object(c["f"])(I,"true"),this.backDialogShowed=!0,this.backDialogShow=!0)},addListeners(){window.pddExchangeLoginCallback=t=>{t&&this.getData()},Object(n["a"])("focus",this.focusHandler)},init(){this.getData(),this.$o2o({e_c:"主页",e_a:"曝光",e_n:"金币兑换现金券"})}},created(){this.addListeners(),this.init()},destroyed(){Object(a["z"])(!1),Object(n["f"])("backKey",this.backKeyHandler),Object(n["f"])("focus",this.focusHandler)}},B=M,N=(i("b7ab"),Object(g["a"])(B,s,o,!1,null,"58567943",null));e["default"]=N.exports},1148:function(t,e,i){"use strict";var s=i("a691"),o=i("1d80");t.exports="".repeat||function(t){var e=String(o(this)),i="",a=s(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(i+=e);return i}},"408a":function(t,e,i){var s=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},4985:function(t,e,i){"use strict";var s=i("5f70"),o=i.n(s);o.a},"58c4":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("gray-mask",{attrs:{show:t.show}},[i("div",{staticClass:"dialog"},[i("div",{staticClass:"light"}),i("div",{staticClass:"close",on:{click:t.closeDialog}}),i("h2",{staticClass:"title"},[t._v("悄悄告诉你 赚金币秘籍")]),i("div",{staticClass:"btns"},[i("button",{staticClass:"btn1",on:{click:function(e){return t.goOtherAct("抽免单")}}},[t._v(" 去抽免单 ")]),i("button",{staticClass:"btn2",on:{click:function(e){return t.goOtherAct("领金币")}}},[t._v(" 去领200金币 ")])]),i("p",{staticClass:"back",on:{click:t.goBack}},[t._v(" 继续返回 ")])])])},o=[],a=i("a1ba"),n=i("685a"),c=i("edb0"),r={components:{GrayMask:a["a"]},props:{page:{type:String,default:"PDD商品列表页"},url:{type:String,default:"bikan://web.goto/commonWebView?url_encode=https%3A%2F%2Ffeed.browser.miui.com%2Fmobile-v2%2Fact%2FpddExchange"}},data(){return{show:!0}},created(){this.$o2o({e_c:"挽留弹窗",e_a:"曝光",e_n:this.page})},methods:{closeDialog(){this.$o2o({e_c:"挽留弹窗关闭",e_a:"点击",e_n:this.page}),this.show=!1,this.$emit("close")},goBack(){this.$o2o({e_c:"挽留弹窗继续返回",e_a:"点击",e_n:this.page}),Object(n["g"])()?Object(c["D"])():this.$router.go(-1)},goOtherAct(t){this.$o2o({e_c:"挽留弹窗".concat(t),e_a:"点击",e_n:this.page}),location.href=this.url}}},l=r,d=(i("c058"),i("2877")),h=Object(d["a"])(l,s,o,!1,null,"7eab1b42",null);e["a"]=h.exports},"5f70":function(t,e,i){},6910:function(t,e,i){},"6d6a":function(t,e,i){},"776e":function(t,e,i){"use strict";var s=i("8552"),o=i.n(s);o.a},8226:function(t,e,i){},8552:function(t,e,i){},9991:function(t,e,i){},a1ba:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"gray-mask"},t.$listeners),[t._t("default")],2)},o=[],a={name:"GrayMask",props:{show:{type:[String,Boolean],default:""}},methods:{stopSlide(t){t.preventDefault()}},watch:{show:{handler(t){t?(console.log("禁止滑动"),document.body.addEventListener("touchmove",this.stopSlide,{passive:!1})):(console.log("可以滑动"),document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1}))},immediate:!0}},destroyed(){document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1})}},n=a,c=(i("bccd"),i("2877")),r=Object(c["a"])(n,s,o,!1,null,"4cb2c41a",null);e["a"]=r.exports},b308:function(t,e,i){},b680:function(t,e,i){"use strict";var s=i("23e7"),o=i("a691"),a=i("408a"),n=i("1148"),c=i("d039"),r=1..toFixed,l=Math.floor,d=function(t,e,i){return 0===e?i:e%2===1?d(t,e-1,i*t):d(t*t,e/2,i)},h=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},u=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){r.call({})}));s({target:"Number",proto:!0,forced:u},{toFixed:function(t){var e,i,s,c,r=a(this),u=o(t),p=[0,0,0,0,0,0],v="",_="0",g=function(t,e){var i=-1,s=e;while(++i<6)s+=t*p[i],p[i]=s%1e7,s=l(s/1e7)},m=function(t){var e=6,i=0;while(--e>=0)i+=p[e],p[e]=l(i/t),i=i%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var i=String(p[t]);e=""===e?i:e+n.call("0",7-i.length)+i}return e};if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(v="-",r=-r),r>1e-21)if(e=h(r*d(2,69,1))-69,i=e<0?r*d(2,-e,1):r/d(2,e,1),i*=4503599627370496,e=52-e,e>0){g(0,i),s=u;while(s>=7)g(1e7,0),s-=7;g(d(10,s,1),0),s=e-1;while(s>=23)m(1<<23),s-=23;m(1<<s),g(1,1),m(2),_=b()}else g(0,i),g(1<<-e,0),_=b()+n.call("0",u);return u>0?(c=_.length,_=v+(c<=u?"0."+n.call("0",u-c)+_:_.slice(0,c-u)+"."+_.slice(c-u))):_=v+_,_}})},b7ab:function(t,e,i){"use strict";var s=i("b308"),o=i.n(s);o.a},bccd:function(t,e,i){"use strict";var s=i("9991"),o=i.n(s);o.a},c058:function(t,e,i){"use strict";var s=i("8226"),o=i.n(s);o.a},c1fd:function(t,e,i){"use strict";var s=i("6910"),o=i.n(s);o.a},df77:function(t,e,i){"use strict";var s=i("6d6a"),o=i.n(s);o.a}}]);
//# sourceMappingURL=chunk-3be4268a.e2d29cde.js.map