{"version":3,"sources":["webpack:///./src/utils/scroll.js","webpack:///./src/utils/jsApiV2/deeplink.js","webpack:///./src/components/Button/index.vue?511f","webpack:///src/components/Button/index.vue","webpack:///./src/components/Button/index.vue?c884","webpack:///./src/components/Button/index.vue?8209","webpack:///./src/components/MiVideo/index.vue?012c","webpack:///./src/components/MiVideo/index.vue?d9f6","webpack:///./src/components/Modal/index.vue?efba","webpack:///src/components/Modal/index.vue","webpack:///./src/components/Modal/index.vue?4273","webpack:///./src/components/Modal/index.vue?e886","webpack:///./src/utils/style.js","webpack:///./src/utils/image.js","webpack:///src/components/MiVideo/index.vue","webpack:///./src/components/MiVideo/index.vue?1785","webpack:///./src/components/MiVideo/index.vue?94bd","webpack:///./src/components/Modal/index.vue?7742","webpack:///./src/components/GrayMask/index.vue?8c83","webpack:///src/components/GrayMask/index.vue","webpack:///./src/components/GrayMask/index.vue?cfa5","webpack:///./src/components/GrayMask/index.vue?41da","webpack:///./src/components/GrayMask/index.vue?bd29","webpack:///./src/components/Button/index.vue?74a5"],"names":["throttleTime","listenerFlag","throttle","fn","delay","flag","timer","rest","clearTimeout","setTimeout","apply","scrollMonitor","params","targetDom","customMonitorFn","callback","threshold","keepAlive","inViewport","monitorDom","sameMemory","listenScrollMointorDomInView","dom","paramsObj","Object","assign","addEventListener","removeScrollMointorDomInView","removeEventListener","openDeepLink","deepLink","tryCall","goTab","tab","openDeeplink","goIndexTab","goUserProfile","headIcon","config","default","userIcon","nickname","userId","encodeURIComponent","getWebviewDeeplink","url","gotoAssignUrl","location","href","getTabLink","goMineTabTask","getDetailDeeplink","type","docId","render","_vm","this","_h","$createElement","_c","_self","class","disabled","style","on","clickHandler","_t","staticClass","_e","staticRenderFns","component","directives","name","rawName","value","expression","handleClickPlaceholderVideo","_v","_s","title","attrs","posterThumbnail","showPlaceholderVideo","ref","id","duration","videoUrl","modalShow","modal","msg","confirmText","cancelText","confirm","cancel","$event","target","currentTarget","closeModal","domProps","cancelbtnStyle","onCancel","confirmbtnStyle","onConfirm","loadCss","src","node","document","createElement","poll","nodep","isLoaded","test","navigator","userAgent","sheet","cssRules","ex","code","rel","head","insertBefore","firstChild","attachEvent","onLoad","getThumbnailUrl","width","height","quality","getRandomThumbnailUrlBase","thumbnailUrlList","index","Math","floor","random","format","isIOS","reg","thumbnail","replace","match","p1","p2","p3","miCdnReg","nextUrl","p4","_g","$listeners"],"mappings":"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","file":"js/chunk-33a2df46.d6475b3e.js","sourcesContent":["import { inViewport } from './dom';\n\nconst throttleTime = 16;\nlet listenerFlag = true;\n\n\nfunction throttle(fn, delay) {\n    let flag = true;\n    let timer = null;\n    // eslint-disable-next-line func-names\n    return (...rest) => {\n        if (!flag) {\n            return;\n        }\n        flag = false;\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            fn.apply(this, rest);\n            flag = true;\n        }, delay);\n    };\n}\n\n\nfunction scrollMonitor(params) {\n    const { targetDom, customMonitorFn, callback, threshold, keepAlive } = params;\n    if (typeof customMonitorFn === 'function') {\n        if (customMonitorFn() && listenerFlag) {\n            // callback 为可选函数\n            if (callback) {\n                callback();\n            }\n            if (!keepAlive) {\n                listenerFlag = false;\n            }\n        }\n    } else if (inViewport(targetDom, threshold) && listenerFlag) {\n        callback();\n        listenerFlag = false;\n    }\n}\n\n/** *\n * dom: 滑动的dom\n * targetDom: 需要监听的目标dom\n * callback: 当满足条件的时候 回调函数\n * delay: 延时\n * threshold: 间距 inViewport所需\n * customMonitorFn: 自定义监控函数  未传入的话 使用inViewport\n * customMonitorFn: 自定义监控函数  未传入的话 使用inViewport\n */\nfunction monitorDom(params) {\n    const { delay } = params;\n    // eslint-disable-next-line consistent-return\n    return throttle(() => {\n        scrollMonitor(params);\n    }, delay);\n}\n\nlet sameMemory = null;\n\n\nexport function listenScrollMointorDomInView(params) {\n    const { dom } = params;\n    const paramsObj = Object.assign(params, {\n        delay: params.delay || throttleTime,\n    });\n    sameMemory = monitorDom(paramsObj);\n    dom.addEventListener(\n        'scroll',\n        sameMemory,\n    );\n}\n\nexport function removeScrollMointorDomInView(params) {\n    const { dom } = params;\n    listenerFlag = false;\n    dom.removeEventListener(\n        'scroll',\n        sameMemory,\n    );\n}\n","import config from '@/config';\nimport { openDeeplink, tryCall } from './index';\n\n// 想看deeplink的跳转    https://wiki.n.miui.com/pages/viewpage.action?pageId=111550986\n\n/**\n *\n * 打开deeplink，主要是广告使用，广告里面一般也会有他们自己的deeplink\n * @export\n * @param {*} { deepLink }\n * @returns\n */\nexport function openDeepLink({ deepLink }) {\n    return tryCall('openDeepLink', deepLink);\n}\n\n// 低版本使用的跳转tab的链接，新版本建议使用下面的goIndexTab\nexport function goTab(tab) {\n    return openDeeplink(`web.tab/${tab}`);\n}\n\n// 首页tab跳转\nexport function goIndexTab(tab) { // newsTab,videoTab,topicTab,mineTab,chatTab,permissionSetting\n    return openDeeplink(`goto/${tab}`);\n}\n\n// 详情页跳转 发布器\nexport function goPublishTopic(topicId, topicName) {\n    return openDeeplink(`goto/publishTopic?docId=${topicId}&selectTopic=${topicName}&pageStyle=1`);\n}\n\n// 个人主页\nexport function goUserProfile({ headIcon = config.default.userIcon, nickname, userId }) {\n    return openDeeplink(`goto/userInfoDetail?userId=${userId}&headIcon=${encodeURIComponent(headIcon)}&nickName=${nickname}`);\n}\n\n// 打开网页\nexport function getWebviewDeeplink(url) {\n    return `bikan://web.goto/commonWebView?url_encode=${encodeURIComponent(url)}`;\n}\n\n// 评论详情页\nexport function goTopicCommentDetail({ topicId, reviewId, topicTitle }) {\n    const url = 'goto/commentDetail?topicStyle=comment&cate=topic&from_type=1&source=topic';\n\n    return openDeeplink(`${url}&docId=${encodeURIComponent(topicId)}&showTopicId=${encodeURIComponent(topicId)}&reviewId=${encodeURIComponent(reviewId)}&topicTitle=${encodeURIComponent(topicTitle)}&title=${encodeURIComponent(topicTitle)}`);\n}\n\nexport function gotoAssignUrl(url) {\n    location.href = url;\n}\n\n/*\n    Todo:  goTopicCommentDetail与getTopicCommentDetailDeeplink 存在重复\n    两个方法都有引用\n*/\nexport function getTopicCommentDetailDeeplink({ topicId, reviewId, topicTitle }) {\n    const url = 'bikan://goto/commentDetail?topicStyle=comment&cate=topic&from_type=1&source=topic';\n\n    return `${url}&docId=${encodeURIComponent(topicId)}&showTopicId=${encodeURIComponent(topicId)}&reviewId=${encodeURIComponent(reviewId)}&topicTitle=${encodeURIComponent(topicTitle)}&title=${encodeURIComponent(topicTitle)}`;\n}\n\n//  未找到相关定义\nexport function getTabLink(tab) {\n    return `bikan://goto/${tab}`;\n}\n\nexport function goMineTabTask() {\n    const url = 'goto/mineTab/task';\n    return openDeeplink(url);\n}\n\n\n/*\n    Todo:  goDetail方法无引用，且与getDetailDeeplink 存在重复\n*/\nexport function goDetail(type, docId) {\n    return openDeeplink(`goto/${type}Detail?docId=${docId}`);\n}\n\nexport function goTopicDetail(topicId) {\n    return openDeeplink(`goto/topicDetail?topicId=${topicId}`);\n}\n\nexport function getTopicDetailDeeplink(topicId) {\n    return `bikan://goto/topicDetail?topicId=${topicId}`;\n}\n\nexport function getDetailDeeplink(type, docId) {\n    return `bikan://goto/${type}Detail?docId=${docId}`;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:['button', { disabled: _vm.disabled } ],style:(_vm.customStyle),on:{\"click\":_vm.clickHandler}},[_vm._t(\"default\"),_vm._t(\"desc\"),(_vm.loading)?_c('div',{staticClass:\"button__loading\"}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <button\n        :class=\"['button', { disabled } ]\"\n        :style=\"customStyle\"\n        @click=\"clickHandler\">\n        <slot />\n        <slot name=\"desc\" />\n        <div\n            v-if=\"loading\"\n            class=\"button__loading\" />\n    </button>\n</template>\n\n<script>\nexport default {\n    name: 'Button',\n    props: {\n        loading: {\n            type: Boolean,\n            default: false,\n        },\n        disabled: {\n            type: Boolean,\n            default: false,\n        },\n        customStyle: {\n            type: Object,\n            default: () => ({}),\n        },\n    },\n    methods: {\n        clickHandler() {\n            if (this.disabled) return;\n\n            this.$emit('click');\n        },\n    },\n};\n</script>\n\n<style scoped>\n.button {\n    display: block;\n    margin: 12px auto;\n    width: 250px;\n    height: 40px;\n    font: 13px miui;\n    color: #fff;\n    background-color: #fbb212;\n    border-radius: 25px;\n    text-align: center;\n}\n\n.button.disabled {\n    background: #d6d6d6;\n}\n\n.button__loading {\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 5px;\n    width: 18px;\n    height: 18px;\n    background: url(./image/loading.webp) no-repeat;\n    background-size: 18px 18px;\n    animation: spin linear 1s infinite;\n}\n\n@keyframes spin {\n    from {\n        transform: rotate(0deg);\n    }\n\n    to {\n        transform: rotate(360deg);\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5da6ccb1&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5da6ccb1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5da6ccb1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6b63c869&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6b63c869&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPlaceholderVideo),expression:\"showPlaceholderVideo\"}],staticClass:\"placeholder-video\",style:(_vm.CSStyle),on:{\"click\":_vm.handleClickPlaceholderVideo}},[(_vm.title)?_c('div',{staticClass:\"video-header\"},[_c('span',{staticClass:\"vjs-header-layer\"}),_c('span',{staticClass:\"vjs-header-title\"},[_vm._v(_vm._s(_vm.title))])]):_vm._e(),_c('ImageLoader',{staticClass:\"placeholder-poster\",attrs:{\"src\":_vm.posterThumbnail}}),_c('ImageLoader',{staticClass:\"placeholder-video-play\",attrs:{\"src\":\"https://ts.market.mi-img.com/download/Browser/0fb9151b60e39311ed1d0fec6799ebb3521419224/play.png\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showPlaceholderVideo),expression:\"!showPlaceholderVideo\"}]},[_c('video',{ref:\"miVideoPlayer\",staticClass:\"video-js\",style:(_vm.CSStyle),attrs:{\"x5-playsinline\":\"\",\"playsinline\":\"\",\"webkit-playsinline\":\"\",\"controls\":\"\",\"id\":_vm.id,\"preload\":\"auto\",\"poster\":_vm.posterThumbnail}},[_c('source',{attrs:{\"type\":\"video/mp4\",\"duration\":_vm.duration,\"src\":_vm.videoUrl,\"title\":_vm.title}})])]),_c('Modal',{attrs:{\"show\":_vm.modalShow,\"msg\":_vm.modal.msg,\"close\":false,\"confirm-text\":_vm.modal.confirmText,\"cancel-text\":_vm.modal.cancelText},on:{\"confirm\":_vm.confirm,\"cancel\":_vm.cancel}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.show)?_c('div',{staticClass:\"modal\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closeModal($event)}}},[_c('div',{staticClass:\"modal__content\"},[_vm._t(\"default\",[_c('div',{staticClass:\"modal__inner\"},[_c('div',{staticClass:\"modal__msg\"},[(_vm.title)?_c('h1',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_vm._t(\"msg\",[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.msg)}})])],2),_c('div',{staticClass:\"modal-footer\"},[_c('Button',{attrs:{\"customStyle\":_vm.cancelbtnStyle},on:{\"click\":_vm.onCancel}},[_vm._v(_vm._s(_vm.cancelText))]),_c('Button',{attrs:{\"customStyle\":_vm.confirmbtnStyle},on:{\"click\":_vm.onConfirm}},[_vm._v(_vm._s(_vm.confirmText))])],1)])])],2)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <transition name=\"fade\">\n        <div\n            v-if=\"show\"\n            class=\"modal\"\n            @click.self=\"closeModal\">\n            <div class=\"modal__content\">\n                <slot>\n                    <div class=\"modal__inner\">\n                        <div class=\"modal__msg\">\n                            <h1 v-if='title'>{{ title }}</h1>\n                            <slot name=\"msg\">\n                                <p v-html=\"msg\" />\n                            </slot>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <Button\n                                :customStyle=\"cancelbtnStyle\"\n                                @click=\"onCancel\">{{ cancelText }}</Button>\n                            <Button\n                                :customStyle=\"confirmbtnStyle\"\n                                @click=\"onConfirm\">{{ confirmText }}</Button>\n                        </div>\n\n                    </div>\n                </slot>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport Button from '@/components/Button';\n\nconst buttonStyle = {\n    background: '#fff',\n    height: '0.30rem',\n    fontSize: '0.14rem',\n    flex: '1',\n    margin: 0,\n};\nexport default {\n    name: 'Modal',\n    components: {\n        Button,\n    },\n    data() {\n        return {\n            confirmbtnStyle: {\n                color: this.confirmColor,\n                ...buttonStyle,\n            },\n            cancelbtnStyle: {\n                color: this.cancelColor,\n                ...buttonStyle,\n            },\n        };\n    },\n    props: {\n        show: {\n            type: Boolean,\n            default: false,\n        },\n        title: {\n            type: String,\n            default: '',\n        },\n        msg: {\n            type: String,\n            default: '',\n        },\n        close: {\n            type: Boolean,\n            default: false,\n        },\n        confirmText: {\n            type: String,\n            default: '',\n        },\n        cancelText: {\n            type: String,\n            default: '',\n        },\n        confirmColor: {\n            type: String,\n            default: '#eb4940',\n        },\n        cancelColor: {\n            type: String,\n            default: '#d9d9d9',\n        },\n        confirm: {\n            type: Function,\n            default: () => {},\n        },\n        cancel: {\n            type: Function,\n            default: () => {},\n        },\n    },\n    methods: {\n        closeModal() {\n            if (this.close) {\n                this.$emit('cancel');\n            }\n        },\n        onConfirm() {\n            this.$emit('confirm');\n        },\n        onCancel() {\n            this.$emit('cancel');\n        },\n        stopSlide(e) {\n            e.preventDefault();\n        },\n    },\n    watch: {\n        show(v) {\n            if (v) {\n                document.body.addEventListener('touchmove', this.stopSlide, { passive: false });\n            } else {\n                document.body.removeEventListener('touchmove', this.stopSlide, { passive: false });\n            }\n        },\n    },\n    destroyed() {\n        document.body.removeEventListener('touchmove', this.stopSlide, { passive: false });\n    },\n};\n</script>\n\n<style scoped>\n.modal {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 999999;\n}\n\n.modal__content {\n    background-color: #fff;\n    border-radius: 10px;\n}\n\n.modal__close {\n    width: 30px;\n    height: 30px;\n    margin: 7px 7px -7px auto;\n    background-size: 12px 12px;\n    background-position: center center;\n}\n\n.modal-footer {\n    display: flex;\n    justify-content: center;\n    width: 250px;\n    height: 40px;\n    border-radius: 10px;\n    margin: 0 auto;\n}\n\n.modal__msg {\n    margin: 0 10px 25px 10px;\n    width: 250px;\n    font-size: 14px;\n    text-align: center;\n    font-weight: bold;\n}\n\n.modal__msg h1 {\n    font-size: 18px;\n    font-weight: 600;\n    line-height: 25px;\n    text-align: center;\n    margin: 0;\n}\n\n.modal__msg p {\n    margin: 19px auto 0 auto;\n    line-height: 25px;\n    color: rgba(0, 0, 0, 0.8);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.2s;\n}\n\n.fade-enter,\n.fade-leave-to {\n    opacity: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=68bc51d7&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=68bc51d7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68bc51d7\",\n  null\n  \n)\n\nexport default component.exports","export function load(href) {\n    if (href) {\n        const styleLink = window.document.createElement('link');\n\n        styleLink.type = 'text/css';\n        styleLink.rel = 'stylesheet';\n        styleLink.crossorigin = 'anonymous';\n        styleLink.href = href;\n\n        const $head = window.document.getElementsByTagName('head')[0];\n\n        if ($head && $head.appendChild) {\n            $head.appendChild(styleLink);\n        }\n    }\n}\nexport function loadCss(src, fn) {\n    const node = document.createElement('link');\n    node.rel = 'stylesheet';\n    node.href = src;\n    function poll(nodep, callback) {\n        let isLoaded = false;\n        if (/webkit/i.test(navigator.userAgent)) { // webkit\n            if (nodep.sheet) {\n                isLoaded = true;\n            }\n        } else if (nodep.sheet) { // for Firefox\n            try {\n                if (nodep.sheet.cssRules) {\n                    isLoaded = true;\n                }\n            } catch (ex) {\n                // NS_ERROR_DOM_SECURITY_ERR\n                if (ex.code === 1000) {\n                    isLoaded = true;\n                }\n            }\n        }\n        if (isLoaded) {\n            setTimeout(() => {\n                callback(null, nodep);\n            }, 1);\n        } else {\n            setTimeout(() => {\n                poll(nodep, callback);\n            }, 10);\n        }\n    }\n\n    document.head.insertBefore(node, document.head.firstChild);\n    if (node.attachEvent) { // IE\n        node.attachEvent('onload', () => {\n            fn(null, node);\n        });\n    } else { // other browser\n        setTimeout(() => {\n            poll(node, fn);\n        }, 0);\n    }\n\n    node.onLoad = () => {\n        fn(null, node);\n    };\n}\n\nexport function test() { }\n","import { isIOS } from './ua';\n\nexport default function getThumbnailUrl(url, width, height, quality = 80) {\n    if (!url && typeof url !== 'string') {\n        return url;\n    }\n\n    const getRandomThumbnailUrlBase = () => {\n        const thumbnailUrlList = [\n            'http://t1.market.xiaomi.com/thumbnail/',\n            'http://t2.market.xiaomi.com/thumbnail/',\n            'http://t3.market.xiaomi.com/thumbnail/',\n            'http://t4.market.xiaomi.com/thumbnail/',\n            'http://t5.market.xiaomi.com/thumbnail/',\n            'http://t1.market.mi-img.com/thumbnail/',\n            'http://t2.market.mi-img.com/thumbnail/',\n            'http://t3.market.mi-img.com/thumbnail/',\n            'http://t4.market.mi-img.com/thumbnail/',\n            'http://t5.market.mi-img.com/thumbnail/',\n            'https://ts.market.mi-img.com/thumbnail/',\n        ];\n        const index = Math.floor(11 * Math.random());\n\n        return thumbnailUrlList[index] || thumbnailUrlList[10];\n    };\n    const format = isIOS() ? 'jpeg' : 'webp';\n\n    const reg = /^(https?:\\/\\/t[s12345]\\.market\\.(mi-img|xiaomi)\\.com\\/download\\/)(.*?)$/g;\n    if (reg.test(url)) {\n        const thumbnail = url.replace(reg, (match, p1, p2, p3) => (width && height\n            ? `${getRandomThumbnailUrlBase()}${format}/w${width}h${height}q${quality}/${p3}`\n            : `${getRandomThumbnailUrlBase()}${format}/q${quality}/${p3}`));\n\n        return thumbnail;\n    }\n\n    const miCdnReg = /^(https?:\\/\\/images\\.cdn\\.pt\\.xiaomi\\.com\\/thumbnail\\/).*?(\\/Feeds.*?)$/g;\n    if (miCdnReg.test(url)) {\n        const thumbnail = url.replace(miCdnReg, (match, p1, p2) => (width && height\n            ? `${p1}${format}/w${width}h${height}q${quality}/${p2}`\n            : `${p1}${format}/q${quality}/${p2}`));\n\n        return thumbnail;\n    }\n\n    const nextUrl = url.replace(/^(https?:\\/\\/t[s12345]\\.market\\.(mi-img|xiaomi)\\.com\\/thumbnail\\/)(.*?)(\\/MiddleReview.*)$/g, (match, p1, p2, p3, p4) => (width && height\n        ? `${p1}${format}/w${width}h${height}q${quality}${p4}`\n        : `${p1}${format}/q${quality}${p4}`));\n\n    return nextUrl;\n}\n","/* eslint-disable semi */\n<template>\n    <div class=\"video\">\n        <div\n            v-show=\"showPlaceholderVideo\"\n            class=\"placeholder-video\"\n            :style=\"CSStyle\"\n            @click=\"handleClickPlaceholderVideo\"\n        >\n            <div\n                v-if=\"title\"\n                class=\"video-header\">\n                <span class=\"vjs-header-layer\" />\n                <span class=\"vjs-header-title\">{{ title }}</span>\n            </div>\n            <ImageLoader\n                class=\"placeholder-poster\"\n                :src=\"posterThumbnail\"/>\n            <ImageLoader\n                class=\"placeholder-video-play\"\n                src=\"https://ts.market.mi-img.com/download/Browser/0fb9151b60e39311ed1d0fec6799ebb3521419224/play.png\"\n            />\n        </div>\n        <div v-show=\"!showPlaceholderVideo\">\n            <video\n                x5-playsinline\n                playsinline\n                webkit-playsinline\n                controls\n                :id=\"id\"\n                class=\"video-js\"\n                ref=\"miVideoPlayer\"\n                preload=\"auto\"\n                :poster=\"posterThumbnail\"\n                :style=\"CSStyle\"\n            >\n                <source\n                    type=\"video/mp4\"\n                    :duration=\"duration\"\n                    :src=\"videoUrl\"\n                    :title=\"title\"\n                >\n            </video>\n        </div>\n        <Modal\n            :show=\"modalShow\"\n            :msg=\"modal.msg\"\n            :close='false'\n            :confirm-text=\"modal.confirmText\"\n            :cancel-text=\"modal.cancelText\"\n            @confirm='confirm'\n            @cancel='cancel'/>\n    </div>\n</template>\n\n<script>\nimport ImageLoader from '@/components/ImageLoader';\nimport Modal from '@/components/Modal';\nimport * as javascript from '@/utils/javascript';\nimport { sset, sget, sremove } from '@/utils/cache';\nimport * as style from '@/utils/style';\nimport { show, css, getElementsByClassName } from '@/utils/dom';\nimport { random } from '@/utils/string';\nimport getThumbnailUrl from '@/utils/image';\nimport { getDetailDeeplink } from '@/utils/jsApiV2/deeplink';\n// import { deeplinkApp, cKey } from '@/utils/share';\nimport { goBrowerDownload } from '@/utils/share';\nimport { listenScrollMointorDomInView, removeScrollMointorDomInView } from '@/utils/scroll';\n\nexport default {\n    name: 'MiVideo',\n    components: {\n        ImageLoader,\n        Modal,\n    },\n    props: {\n        CSStyle: {\n            type: Object,\n            default: () => ({}),\n        },\n        onlyShowPlaceholderVideo: {\n            type: Boolean,\n            default: false,\n        },\n        poster: {\n            type: String,\n            default: '',\n        },\n        duration: {\n            type: Number,\n            required: true,\n        },\n        videoUrl: {\n            type: String,\n            required: true,\n        },\n        title: {\n            type: String,\n            default: '',\n        },\n        playTimeToApp: {\n            type: Number,\n            default: 0,\n        },\n        docId: {\n            type: String,\n            default: '',\n        },\n        handleClickPlaceholderVideo: {\n            type: Function,\n            default: () => {},\n        },\n    },\n    methods: {\n        deeplinkCallBack() {\n\n        },\n        confirm() {\n            this.modalShow = false;\n            window.history.back();\n            this.$o2o({\n                e_c: '资讯分享页',\n                e_a: '点击确定',\n                e_n: '前往APP观看原视频',\n            });\n            // deeplinkApp(getDetailDeeplink('video', this.$route.params.id),\n            // this.deeplinkCallBack, cKey);\n            goBrowerDownload({\n                page: 'read',\n                source: 'video',\n                channel: 'xiaomi_shipin.apk',\n                title: this.title,\n                schema: getDetailDeeplink('video', this.$route.params.id),\n            });\n        },\n        cancel(close) {\n            if (!close) {\n                window.history.back();\n            }\n            this.modalShow = false;\n            this.$o2o({\n                e_c: '资讯分享页',\n                e_a: '点击取消',\n                e_n: '前往APP观看原视频',\n            });\n            // eslint-disable-next-line radix\n            this.player.ready(() => {\n                this.player.play();\n            });\n        },\n        monitorHistoryBack() {\n            // 点击了浏览器回退按钮\n            sset('notAllowMonitorVideoPlay', true);\n            window.history.pushState(null, null, '#historyVideo');\n            window.addEventListener('popstate', this.videoBack, false);\n        },\n        videoBack() {\n            this.modalShow = false;\n        },\n        whetherShowModal() {\n            // eslint-disable-next-line radix\n            if (parseInt(this.player.currentTime()) === this.playTimeToApp) {\n                // 视频暂停 弹框显示\n                this.player.pause();\n                this.modalShow = true;\n                this.$o2o({\n                    e_c: '资讯分享页',\n                    e_a: '曝光',\n                    e_n: '前往APP观看原视频',\n                });\n                this.monitorHistoryBack();\n                // 满足条件以后 禁止监听 防止多次触发\n                this.player.off('timeupdate', this.whetherShowModal);\n            }\n        },\n        monitorPlayTime() {\n            // 附加唯一标志位  其他视频播放页无此功能\n            const notAllowMonitorVideoPlay = sget('notAllowMonitorVideoPlay');\n            /**\n             *  用户回退之后关闭弹框  notAllowMonitorVideoPlay为true\n             *  此时可以用这个变量做标识  直接定位到用户已经观看的点\n             */\n            if (!this.showPlaceholderVideo && this.playTimeToApp && !notAllowMonitorVideoPlay) {\n                this.player.on('timeupdate', this.whetherShowModal);\n            }\n            // 添加监控视频行为  当视频不可见的时候  暂停视频  当视频可见的时候 播放视频\n            if (!this.showPlaceholderVideo && this.playTimeToApp) {\n                this.decidevideoPlayOrPause();\n            }\n        },\n        decidevideoPlayOrPause() {\n            this.videoDom = getElementsByClassName('video-content')[0];\n            listenScrollMointorDomInView({\n                dom: window,\n                targetDom: this.videoDom,\n                customMonitorFn: this.VideoplayOrPause,\n                delay: 100,\n            });\n        },\n        VideoplayOrPause() {\n            const height = this.videoDom.clientHeight;\n            // eslint-disable-next-line radix\n            const top = parseInt(this.videoDom.getBoundingClientRect().top);\n            if (top < 0 && Math.abs(top) > height) {\n                this.player.pause();\n            }\n        },\n        initVideojs(ele) {\n            // FIXME: 用 script onload 加载事件去模拟 link 加载\n            // TODO: 节点上加display:none; 然后在异步加载的样式中覆盖掉display\n            // 这样可避免浏览器把css当成js运行，同时也避免了加载完成前的样式错误\n            const cssUrl = 'https://ssl-cdn.static.browser.mi-img.com/feed/sdk/videojs/video-js.min.css';\n            const javascriptUrl = 'https://ssl-cdn.static.browser.mi-img.com/feed/sdk/videojs/video.min.js';\n\n            style.loadCss(cssUrl, () => {\n                javascript.loadCallback(javascriptUrl, () => {\n                    this.player = window.videojs(ele, {\n                        controlBar: {\n                            playToggle: {\n                                replay: false,\n                            },\n                            children: [\n                                'currentTimeDisplay',\n                                'progressControl',\n                                'durationDisplay',\n                            ],\n                        },\n                    }, () => {\n                        this.$nextTick(() => {\n                            this.showPlaceholderVideo = false;\n                            this.monitorPlayTime();\n                            css(`#${this.id}`, { ...this.CSStyle, ...{ display: 'none' } });\n                            show(`#${this.id}`);\n                        });\n                    });\n\n                    this.player.on('error', () => {\n                        if (this.docId) {\n                            this.$o2o({\n                                e_c: '死链上报',\n                                e_a: '曝光',\n                                e_n: '视频',\n                                e_x: {\n                                    docId: this.docId,\n                                },\n                            });\n                        }\n                    });\n                    this.player.on('ended', () => {\n                        this.$emit('ended');\n                    });\n                });\n            });\n        },\n    },\n    computed: {\n        id() {\n            const randomString = random('0123456789abcdefghijklmnopqrstuvwxyz', 20);\n            const id = `mi-video-js-${randomString}`;\n\n            return id;\n        },\n        posterThumbnail() {\n            const height = parseInt(parseFloat(this.CSStyle.height) * 100, 10);\n            const width = parseInt(parseFloat(this.CSStyle.width) * 100, 10);\n\n            return getThumbnailUrl(this.poster, height, width);\n        },\n    },\n    data() {\n        return {\n            showPlaceholderVideo: true,\n            player: {},\n            modalShow: false,\n            modal: {\n                msg: '前往想看APP观看原视频,播放更流畅',\n                confirmText: '确定',\n                cancelText: '取消',\n            },\n            videoDom: {},\n        };\n    },\n    mounted() {\n        if (!this.onlyShowPlaceholderVideo) {\n            this.$nextTick(() => {\n                if (!this.$refs.miVideoPlayer) {\n                    return;\n                }\n\n                this.initVideojs(this.$refs.miVideoPlayer);\n            });\n        }\n    },\n    beforeDestroy() {\n        /**\n         * 1. 解除 videoJs对于视频播放进度的监听\n         * 2. 解除视窗对于video是否存在于当前视口内的监听\n         * 3. 解除sessionStorage\n         * 4. 解除对于浏览器回退行为的监听\n         */\n        if (!this.showPlaceholderVideo && this.playTimeToApp) {\n            removeScrollMointorDomInView({\n                dom: window,\n            });\n            sremove('notAllowMonitorVideoPlay');\n            window.removeEventListener('popstate', this.goBack);\n        }\n    },\n};\n</script>\n\n<style scoped>\n.video {\n    height: 100%;\n    width: 100%;\n}\n\n.placeholder-video {\n    height: 100%;\n    width: 100%;\n    position: relative;\n}\n\n.video .placeholder-video-play {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin: -21px 0 0 -21px !important;\n    height: 42px;\n    width: 42px;\n}\n\n.video-header {\n    display: table;\n    position: absolute;\n    top: 0;\n    left: 0;\n    padding: 1em 1.5em;\n    width: 100%;\n    color: #fff;\n    font-size: 16px;\n    font-weight: 700;\n    z-index: 2;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6b63c869&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6b63c869&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b63c869\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=68bc51d7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=68bc51d7&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._g({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],staticClass:\"gray-mask\"},_vm.$listeners),[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div\n        v-show=\"show\"\n        v-on=\"$listeners\"\n        class=\"gray-mask\">\n        <slot/>\n    </div>\n</template>\n<script>\nexport default {\n    name: 'GrayMask',\n    props: {\n        show: {\n            type: [String, Boolean],\n            default: '',\n        },\n    },\n    methods: {\n        stopSlide(e) {\n            e.preventDefault();\n        },\n    },\n    watch: {\n        show: {\n            handler(v) {\n                if (v) {\n                    console.log('禁止滑动');\n                    document.body.addEventListener('touchmove', this.stopSlide, { passive: false });\n                } else {\n                    console.log('可以滑动');\n                    document.body.removeEventListener('touchmove', this.stopSlide, { passive: false });\n                }\n            },\n            immediate: true,\n        },\n    },\n    destroyed() {\n        document.body.removeEventListener('touchmove', this.stopSlide, { passive: false });\n    },\n\n};\n</script>\n\n<style scoped>\n.gray-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    width: 100vw;\n    height: 100vh;\n    z-index: 9999;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4cb2c41a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4cb2c41a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cb2c41a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4cb2c41a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4cb2c41a&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5da6ccb1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5da6ccb1&scoped=true&lang=css&\""],"sourceRoot":""}