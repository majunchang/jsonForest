(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75d0dd22"],{"08c3":function(t,e,a){"use strict";var s=a("a111"),i=a.n(s);i.a},1148:function(t,e,a){"use strict";var s=a("a691"),i=a("1d80");t.exports="".repeat||function(t){var e=String(i(this)),a="",n=s(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"16fd":function(t,e,a){},"1a67":function(t,e,a){"use strict";var s=a("87fe"),i=a.n(s);i.a},"26a3":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return r}));a("e6cf");var s=a("0c6d");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["b"].post("/api/v4/pace/report",t).then(t=>200!==t.data.status?(Object(s["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["b"].get("/api/v4/pace/page",t).then(t=>200!==t.data.status?(Object(s["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["b"].post("/api/v4/pace/exchange",t).then(t=>200!==t.data.status?(Object(s["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["b"].get("/api/v4/pace/exchange/records",t).then(t=>200!==t.data.status?(Object(s["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["b"].post("/api/v4/pace/subscribe",t).then(t=>200!==t.data.status?(Object(s["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}},"408a":function(t,e,a){var s=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},"5a45":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("TitleBar",{attrs:{title:"走路赚钱"}},[s("span",{staticClass:"title-bar-share",on:{click:e.shareDot}})]),s("div",{staticClass:"running"},[s("div",{staticClass:"running-bg"},[s("div",{staticClass:"convert-record",on:{click:e.ToExchangeRecords}},[s("span",{staticClass:"convert-icon"}),e._v(" 兑换记录 ")]),s("div",{class:[this.runningInfo.isSubscribe?"":"subscribe","alert"],on:{click:e.subscribeClock}},[s("div",{staticClass:"alert-clock"}),s("div",{staticClass:"alert-strip"},[s("p",[e._v(" "+e._s(e.runningInfo.isSubscribe?"已订阅":"打卡提醒"))])])]),s("div",{staticClass:"cloud"}),s("div",{staticClass:"small-cloud"}),s("PassMeter",{attrs:{"running-info":e.runningInfo}}),e.gotStepAuth?s("div",{class:[this.runningInfo.isOverDailyLimit||this.exchangeAtOnceDisabled?"get-coin-disabled":"","get-coin"],on:{click:e.exchangeAtOnce}},[e._v(" "+e._s(e.computeExchangeButtonText())+" ")]):s("div",{staticClass:"get-coin",on:{click:e.openStepAuthBtn}},[e._v(" 开启权限领金币 ")])],1),s("div",{staticClass:"running-banner"},[s("span",{staticClass:"running-banner-img"}),e._m(0),s("div",{staticClass:"running-banner-btn",on:{click:e.toInvite}},[e._v(" 去邀请 ")])]),s("div",{staticClass:"today-data"},[s("div",{staticClass:"today-data-title"},[e._v(" 今日数据 ")]),s("div",{staticClass:"today-data-content"},[s("div",{staticClass:"today-data-item"},[s("div",{staticClass:"data"},[e._v(" "+e._s(this.mileage)),s("div",{staticClass:"unit"},[e._v("公里")])]),e._m(1)]),s("div",{staticClass:"today-data-item"},[s("div",{staticClass:"data"},[e._v(" "+e._s(this.walktime.hour)),s("div",{staticClass:"unit"},[e._v("时")]),e._v(" "+e._s(this.walktime.minute)),s("div",{staticClass:"unit"},[e._v("分")])]),e._m(2)]),s("div",{staticClass:"today-data-item"},[s("div",{staticClass:"data"},[e._v(" "+e._s(this.calarie)),s("div",{staticClass:"unit"},[e._v("千卡")])]),e._m(3)])])]),s("div",{staticClass:"act-rule"},[s("div",{staticClass:"act-rule-title"},[e._v(" 活动规则 ")]),s("div",{staticClass:"act-rule-content"},e._l(e.actRule,(function(t,a){return s("div",{key:a,staticClass:"act-rule-item"},[s("div",{staticClass:"serial"},[e._v(" "+e._s(a+1)+" ")]),s("div",{staticClass:"strip"},[e._v(" "+e._s(t)+" ")])])})),0)]),e._m(4)]),s("div",{staticClass:"running-modal"},[s("gray-mask",{attrs:{show:e.getStepAuthModal}},[s("div",{staticClass:"step-auth modal-conter"},[s("div",{staticClass:"step-auth-close",on:{click:e.closeStepAuthModal}}),s("div",{staticClass:"step-auth-title"},[e._v(" 步数统计权限说明 ")]),s("p",[e._v("参与走路赚金币活动")]),s("p",[e._v("需允许想看APP读取")]),s("p",[e._v("系统运动步数内容")]),s("div",{staticClass:"step-auth-footer",on:{click:e.openStepAuth}},[e._v(" 好的 ")])])]),s("transition",{attrs:{name:"fade"}},[e.showSuccessGetToast?s("div",{staticClass:"running-toast"},[s("div",{staticClass:"open-success modal-conter"},[s("div",{staticClass:"open-success-title"},[e._v(" 兑换成功 "),s("p",{staticClass:"open-success-coin"},[e._v(" +"+e._s(this.runningInfo.coinCanExchange)+"金币 ")])])])]):e._e()]),s("gray-mask",{attrs:{show:e.getCoinModal}},[s("div",{staticClass:"get-coin-modal modal-conter"},[s("div",{staticClass:"get-coin-modal-close",on:{click:e.closeCoinModal}}),s("div",{staticClass:"get-coin-modal-content"},[e._v(" 步数可兑换金币 "),s("div",{staticClass:"coin"},[e._v(" "+e._s(e.runningInfo.coinCanExchange)+" ")])]),s("div",{staticClass:"get-coin-modal-btn",on:{click:e.getAccountAftershare}},[e._v(" 点击分享后到账 ")]),s("div",{staticClass:"get-coin-modal-watermark"},[e._v(" 我的金币 "+e._s(e.runningInfo.totalCoin)+"≈"+e._s(e.transfer(e.runningInfo.totalCoin))+"元 ")])])]),e.updateModal?s("Update",{attrs:{title:"更新至最新客户端，升级后参与走路赚钱活动"},on:{close:function(){t.updateModal=!1},goSetting:e.goSetting}},[s("template",{slot:"content"},[s("div",{staticClass:"update-modal-content"})])],2):e._e()],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"running-banner-text"},[a("p",[t._v("邀请好友")]),a("p",[t._v("一起健康赚钱")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-event"},[a("span",{staticClass:"item-event-icon icon-mileage"}),t._v(" 步行里程 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-event"},[a("span",{staticClass:"item-event-icon icon-walktime"}),t._v(" 步行时间 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-event"},[a("span",{staticClass:"item-event-icon icon-calarie"}),t._v(" 卡路里 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-banner"},[a("div",{staticClass:"watermark"})])}],n=(a("b680"),a("26a3")),c=a("edb0"),o=a("5962"),r=a("42a5"),l=a("6b43"),d=a("c36a"),u=a("a1ba"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("GrayMask",{attrs:{show:!0}},[a("div",{staticClass:"update-modal"},[a("div",{staticClass:"update-modal-header"},[a("div",{staticClass:"update-modal-banner"}),a("div",{staticClass:"update-modal-title"},[t._v(" "+t._s(this.title)+" ")]),a("div",{staticClass:"update-modal-close",on:{click:t.closeModal}})]),t._t("content"),a("div",{staticClass:"update-modal-footer",on:{click:t.goSetting}},[t._v(" 去升级 ")])],2)])],1)},v=[],p={props:{title:{type:String,default:"更新至最新客户端，升级后查看自己的专属地推海报"}},components:{GrayMask:u["a"]},methods:{closeModal(){this.$emit("close")},goSetting(){this.$emit("goSetting")}}},g=p,b=(a("08c3"),a("2877")),f=Object(b["a"])(g,h,v,!1,null,"67ded3c7",null),m=f.exports,_=a("db49"),C=a("7d49"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"passmeter"},[a("ul",{staticClass:"scaleStep"},[t._l(t.scallArr,(function(e,s){return a("li",{key:s,staticClass:"scall",style:t.handleStyle(s)},[a("span")])})),t._l(t.numberArr,(function(e,s){return a("div",{key:s+100,staticClass:"number"},[t._v(" "+t._s(2e3*s)+" ")])})),t._l(t.achieve,(function(e,s){return a("p",{key:s+200,staticClass:"archieve",style:t.handleStyle(s)},[a("span")])}))],2),a("div",{staticClass:"people"}),a("div",{staticClass:"todayStep"},[t._v(" "+t._s(t.todayStep)),a("span",[t._v("步")])]),a("div",{staticClass:"banner"},[t._v(" "+t._s(this.bannerText)+" ")])])},y=[],k={name:"PassMeter",props:{runningInfo:{type:Object,default(){return{}}}},data(){return{scallArr:[],numberArr:[],achieve:[],bannerText:"2000步可得100金币",todayStep:0}},mounted(){this.scallArr=Array.from({length:51}),this.numberArr=Array.from({length:6})},watch:{runningInfo(t){var e=Math.min(1e4,t.todayStep);this.todayStep=t.todayStep;var a=Math.ceil(e/1e4*51);this.achieve=Array.from({length:a}),this.setBannerText(e,t.exchangedCoins)}},methods:{handleStyle(t){var e=4.8*t-30;return{transform:"rotate(".concat(e,"deg)")}},setBannerText(t,e){var a=0,s=0;switch(!0){case t>=1&&t<2e3:a=2e3-t,s=100-e,this.bannerText="再走".concat(a,"步可得").concat(s,"金币");break;case t>=2e3&&t<4e3:a=4e3-t,s=200-e,this.bannerText="再走".concat(a,"步可得").concat(s,"金币");break;case t>=4e3&&t<6e3:a=6e3-t,s=300-e,this.bannerText="再走".concat(a,"步可得").concat(s,"金币");break;case t>=6e3&&t<8e3:a=8e3-t,s=400-e,this.bannerText="再走".concat(a,"步可得").concat(s,"金币");break;case t>=8e3&&t<1e4:a=1e4-t,s=500-e,this.bannerText="再走".concat(a,"步可得").concat(s,"金币");break;case t>=1e3:this.bannerText="恭喜您成为今日健走达人";break;default:this.bannerText="2000步可得100金币"}}}},x=k,w=(a("a049"),Object(b["a"])(x,S,y,!1,null,"edfd9788",null)),O=w.exports,I=["参与走路赚钱活动需允许想看读取系统健康数据，用户确认允许后可参与本活动。","每日达到一定步数可通过点击“立即兑换”按钮，20步可兑换1金币，每天最高可累计兑换10000步，第一次兑换分享后金币立即到账，后续兑换无需分享；当日不兑换则失效，请用户及时领取当日奖励。",'点击"打卡提醒"，满8000步未兑换过金币的情况下，我们将以推送的形式提醒您领取金币哦。',"分享到3个以上微信群/QQ群，成功邀请概率可提升200%，快来试试！"],j={actRule:I},A="clientIsSupportSteps",M="clientGetTodaySteps",T="openSteps",E="todayShare",$={name:"Running",components:{TitleBar:C["a"],PassMeter:O,GrayMask:u["a"],Update:m},data(){return{userInfo:Object(c["t"])(),supportStep:!0,gotStepAuth:!1,getStepAuthModal:!1,showSuccessGetToast:!1,getCoinModal:!1,exchangeAtOnceDisabled:!1,updateModal:!1,shareToGetCoin:!1,runningInfo:{isSubscribe:!1,totalCoin:0,todayStep:0,remainSteps:0,invitationCode:"XIANGKAN"},alertClock:!1,mileage:0,walktime:{hour:"00",minute:"00"},calarie:0,actRule:j.actRule}},created(){this.$root.hidePlaceholder(),this.$o2o({e_c:"走路赚钱",e_a:"曝光",e_n:"首页"}),window.clientIsSupportSteps=this.clientIsSupportSteps,window.clientGetTodaySteps=this.clientGetTodaySteps,Object(o["e"])(A),Object(c["z"])(!0),Object(r["a"])("backKey",this.backKeyHandler)},destroyed(){Object(c["z"])(!1),Object(r["f"])("backKey",this.backKeyHandler),document.removeEventListener("visibilitychange",this.listenVisiblityChange)},methods:{preCheck(){return this.userInfo.isTourist||!this.userInfo.user_id?(Object(c["h"])("location.reload"),!1):!(_["a"].versionCode<40890)||(this.updateModal=!0,!1)},clientIsSupportSteps(t){if(this.preCheck()){this.supportStep=t.supportStep;var e=Object(l["a"])(T);e?(this.gotStepAuth=!0,Object(o["d"])(M)):this.getStepAuthModal=!0}},clientGetTodaySteps(t){this.runningInfo.todayStep=Math.max(t,0),0!==t?Object(n["d"])({steps:this.supportStep?t:-1}).then(()=>{this.getActRunningInfo()}).catch(t=>{t&&t.response&&500===t.response.status?Object(c["H"])(t.response.msg):this.$error()}):this.getActRunningInfo()},getActRunningInfo(){Object(n["b"])().then(t=>{this.runningInfo=t,this.computeEventData()}).catch(()=>{this.$error()})},computeExchangeButtonText(){var t=this.runningInfo.remainSteps,e="";return this.runningInfo.invitationCode?(t<20&&!this.runningInfo.isOverDailyLimit?(this.exchangeAtOnceDisabled=!0,e="还差".concat(20-t,"步领取1金币")):(this.exchangeAtOnceDisabled=!1,e=this.runningInfo.isOverDailyLimit?"明天再来哦":"立即兑换".concat(this.runningInfo.coinCanExchange,"金币")),e):"正在获取最新步数"},computeEventData(){var t=this.runningInfo.todayStep;this.mileage=(t/1e3).toFixed(1),this.walktime={hour:parseInt(t/100/60),minute:parseInt(t/100%60)},this.calarie=(t/35).toFixed(1)},backKeyHandler(){this.getCoinModal?this.getCoinModal=!1:this.getStepAuthModal?this.getStepAuthModal=!1:Object(c["D"])()},ToExchangeRecords(){this.preCheck()&&this.$router.push("/act/running/exchangeRecords")},openStepAuthBtn(){this.preCheck()&&this.openStepAuth()},closeStepAuthModal(){this.getStepAuthModal=!1,this.$o2o({e_c:"走路赚钱",e_a:"点击",e_n:"关闭按钮"})},openStepAuth(){this.getStepAuthModal=!1,this.gotStepAuth=!0,Object(l["c"])(T,!0),Object(o["d"])(M)},exchangeAtOnce(){if(this.preCheck())if(this.runningInfo.isOverDailyLimit)Object(c["H"])("今日领取已达上限，明日再来哦");else if(this.exchangeAtOnceDisabled)Object(c["H"])("每20步可兑换1金币");else{this.$o2o({e_c:"走路赚钱",e_a:"点击",e_n:"立即兑换金币"});var t=Object(l["a"])(E),e=(new Date).getDate();if(parseInt(t,10)!==e)return this.getCoinModal=!0,this.$o2o({e_c:"走路赚钱",e_a:"曝光",e_n:"分享金币到账兑换弹框"}),void document.addEventListener("visibilitychange",this.listenVisiblityChange);this.exchange()}},getAccountAftershare(){this.$o2o({e_c:"走路赚钱",e_a:"点击",e_n:"点击分享到账按钮"}),Object(l["c"])(E,(new Date).getDate()),this.getCoinModal=!1,this.shareToGetCoin=!0,this.share()},listenVisiblityChange(){"visible"===document.visibilityState&&this.shareToGetCoin&&(this.shareToGetCoin=!1,this.exchange())},exchange(){Object(n["a"])({steps:this.runningInfo.remainSteps}).then(t=>{if(1===t.code)return this.showSuccessGetToast=!0,void setTimeout(()=>{this.showSuccessGetToast=!1,this.getActRunningInfo()},3e3);Object(c["H"])(t.msg)}).catch(()=>{this.$error()})},subscribeClock(){this.preCheck()&&(this.runningInfo.isSubscribe=!this.runningInfo.isSubscribe,Object(n["e"])({sub:this.runningInfo.isSubscribe?1:0}).then(()=>{this.runningInfo.isSubscribe?Object(c["H"])("订阅成功"):Object(c["H"])("您已取消订阅")}).catch(()=>{this.$error()}))},toInvite(){this.$o2o({e_c:"走路赚钱",e_a:"点击",e_n:"去邀请按钮"}),this.share()},closeCoinModal(){this.getCoinModal=!1},transfer(t){return(t/1e4).toFixed(2)},shareDot(){this.$o2o({e_c:"走路赚钱",e_a:"点击",e_n:"分享按钮"}),this.share()},share(){if(!this.userInfo.isTourist&&this.userInfo.user_id){var t="https://feed.browser.miui.com/mobile-v2/act/invitation/newshare?shareId=".concat(this.runningInfo.invitationCode,"&share=running");Object(d["d"])(t).then(t=>{var e="今天我在【想看】走路赚钱啦！\n你也试试~\n".concat(t);window.miui.shareText(e,2)}).catch(()=>{Object(c["H"])("分享失败，请升级当前app版本")})}else Object(c["h"])("location.reload")},goSetting(){Object(c["x"])()}}},D=$,G=(a("ed3c"),Object(b["a"])(D,s,i,!1,null,"30d4ebfa",null));e["default"]=G.exports},"7d49":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title-top"}),a("div",{staticClass:"title-bar"},[a("div",{staticClass:"back",on:{click:t.backHandler}}),t._v(" "+t._s(t.title)+" "),t._t("default")],2)])},i=[],n=a("edb0"),c={name:"TitleBar",props:{title:{type:String,default:""},webview:{type:Boolean,default:!0}},methods:{backHandler(){this.webview?Object(n["D"])():this.$router.go(-1)}}},o=c,r=(a("1a67"),a("2877")),l=Object(r["a"])(o,s,i,!1,null,"03f518b2",null);e["a"]=l.exports},"87fe":function(t,e,a){},9991:function(t,e,a){},a049:function(t,e,a){"use strict";var s=a("eae0"),i=a.n(s);i.a},a111:function(t,e,a){},a1ba:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"gray-mask"},t.$listeners),[t._t("default")],2)},i=[],n={name:"GrayMask",props:{show:{type:[String,Boolean],default:""}},methods:{stopSlide(t){t.preventDefault()}},watch:{show:{handler(t){t?(console.log("禁止滑动"),document.body.addEventListener("touchmove",this.stopSlide,{passive:!1})):(console.log("可以滑动"),document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1}))},immediate:!0}},destroyed(){document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1})}},c=n,o=(a("bccd"),a("2877")),r=Object(o["a"])(c,s,i,!1,null,"4cb2c41a",null);e["a"]=r.exports},b680:function(t,e,a){"use strict";var s=a("23e7"),i=a("a691"),n=a("408a"),c=a("1148"),o=a("d039"),r=1..toFixed,l=Math.floor,d=function(t,e,a){return 0===e?a:e%2===1?d(t,e-1,a*t):d(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){r.call({})}));s({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,a,s,o,r=n(this),h=i(t),v=[0,0,0,0,0,0],p="",g="0",b=function(t,e){var a=-1,s=e;while(++a<6)s+=t*v[a],v[a]=s%1e7,s=l(s/1e7)},f=function(t){var e=6,a=0;while(--e>=0)a+=v[e],v[e]=l(a/t),a=a%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==v[t]){var a=String(v[t]);e=""===e?a:e+c.call("0",7-a.length)+a}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(p="-",r=-r),r>1e-21)if(e=u(r*d(2,69,1))-69,a=e<0?r*d(2,-e,1):r/d(2,e,1),a*=4503599627370496,e=52-e,e>0){b(0,a),s=h;while(s>=7)b(1e7,0),s-=7;b(d(10,s,1),0),s=e-1;while(s>=23)f(1<<23),s-=23;f(1<<s),b(1,1),f(2),g=m()}else b(0,a),b(1<<-e,0),g=m()+c.call("0",h);return h>0?(o=g.length,g=p+(o<=h?"0."+c.call("0",h-o)+g:g.slice(0,o-h)+"."+g.slice(o-h))):g=p+g,g}})},bccd:function(t,e,a){"use strict";var s=a("9991"),i=a.n(s);i.a},eae0:function(t,e,a){},ed3c:function(t,e,a){"use strict";var s=a("16fd"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-75d0dd22.42843f9b.js.map