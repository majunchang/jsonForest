(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b554c6c"],{1184:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return c}));i("e6cf");var a=i("0c6d");function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("/api/v4/turntable/getbaseinfo",t).then(t=>200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("/api/v4/turntable/drawlottery",t).then(t=>200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("/api/v4/turntable/getrecordlist",t).then(t=>200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("/api/v4/turntable/share",t).then(t=>200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}},"2d5d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{turntable:!0,"turntable-normal":t.turntableLight,"turntable-reverse":!t.turntableLight}},[i("div",{staticClass:"container"},[i("div",{ref:"turntable",class:{awrads:!0,"table-rotate":t.status}},t._l(t.awards,(function(e,a){return i("div",{key:e.choiceId,class:{award:!0,award_active:t.luckyIndex===a&&t.end},style:{transform:"rotate("+45*a+"deg)"}},[e.choiceDesc?[t._v(" "+t._s(e.choiceDesc)+" ")]:[i("img",{attrs:{src:e.url}})]],2)})),0),i("div",{class:{button:!0,button_scale:t.awards[0].url},on:{click:t.run}},[i("div",{class:{"button-scale":!0,"button-scale-animation":!t.isRotating}})])])])},s=[],o={name:"Turntable",model:{prop:"luckyId",event:"update"},props:{awards:{type:Array,required:!0},luckyId:{type:Number,required:!0}},data(){return{status:!1,angle:0,deltaAngle:720,deltaTime:2e3,endTime:0,luckyIndex:-1,end:!1,turntableLight:!0,timmer:0,isRotating:!1}},created(){this.$nextTick(()=>{this.timmer=setInterval(()=>{this.turntableLight=!this.turntableLight},500)})},destroyed(){clearInterval(this.timmer)},watch:{luckyId(t){!isNaN(t)&&this.status&&this.preSlowDown()}},computed:{halfAcceleration(){var t=.72;return(this.deltaAngle-t*this.deltaTime)/(this.deltaTime*this.deltaTime)}},methods:{run(){this.$emit("start")},start(){this.end=!1,this.$emit("update",NaN),this.endTime=Date.now(),this.isRotating=!0,requestAnimationFrame(this.speedUp)},preSlowDown(){this.luckyIndex=-1;for(var t=0;t<this.awards.length;t+=1)if(this.awards[t].choiceId===this.luckyId){this.luckyIndex=t;break}this.status=!1,-1===this.luckyIndex?this.angle=22:this.angle=360-45*this.luckyIndex,this.endTime=Date.now()+this.deltaTime,requestAnimationFrame(this.slowDown)},slowDown(){var t=this.endTime-Date.now();t>0?(this.$refs.turntable.style["-webkit-transform"]="rotate(".concat(this.angle+this.halfAcceleration*t*t,"deg)"),this.$refs.turntable.style.transform="rotate(".concat(this.angle+this.halfAcceleration*t*t,"deg)"),requestAnimationFrame(this.slowDown)):(this.$refs.turntable.style["-webkit-transform"]="rotate(".concat(this.angle,"deg)"),this.$refs.turntable.style.transform="rotate(".concat(this.angle,"deg)"),this.$emit("stop"),this.isRotating=!1,this.end=!0)},speedUp(){var t=Date.now()-this.endTime;t<1e3?(this.$refs.turntable.style["-webkit-transform"]="rotate(".concat(this.angle+36e-5*t*t,"deg)"),this.$refs.turntable.style.transform="rotate(".concat(this.angle+36e-5*t*t,"deg)"),requestAnimationFrame(this.speedUp)):(this.status=!0,this.$refs.turntable.style["-webkit-transform"]="",this.$refs.turntable.style.transform="",isNaN(this.luckyId)||this.preSlowDown())}}},n=o,c=(i("8772"),i("2877")),r=Object(c["a"])(n,a,s,!1,null,"38f57252",null);e["a"]=r.exports},4153:function(t,e,i){"use strict";var a=i("5e9a"),s=i.n(a);s.a},4330:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["dialog",t.icon]},[i("div",{staticClass:"icon"}),i("div",{staticClass:"title"},[t._v(t._s(t.title))]),i("div",{staticClass:"description"},[t._v(t._s(t.description))]),i("div",{staticClass:"button",on:{click:t.buttonClickHandler}},[t._v(t._s(t.buttonText))])])},s=[],o={name:"LotteryDialog",props:{icon:{type:String,default:"exclamation"},title:{type:String,default:""},description:{type:String,default:""},buttonText:{type:String,default:""}},methods:{buttonClickHandler(){this.$emit("btn-click")}}},n=o,c=(i("83bf"),i("2877")),r=Object(c["a"])(n,a,s,!1,null,"21959f20",null);e["a"]=r.exports},5714:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return o}));var a=["恭喜晓抽中新人专享6元红包","恭喜菩提抽中新人专享1元红包","恭喜想看用户1127抽中福猪一头","恭喜梁三顺 抽中福猪一头","恭喜嘿嘿哈皮抽中新人专享6元红包"],s={nocoin:{title:"你的金币余额不足",description:"先去做任务赚取更多金币吧",buttonText:"赚金币",stat:"弹窗-赚金币"},noCount:{title:"您今日的翻倍机会已用完",description:"明天再来试试吧",buttonText:"去赚更多金币",stat:"弹窗-赚金币"},share:{title:"你今日的翻倍次数已用完",description:"分享可增加一次翻倍机会哦",buttonText:"分享",stat:"弹窗-分享"},pig:{icon:"star",title:"太幸运了",description:'恭喜您抽中"福猪"一头！打开想看APP，找到领福猪页面，领取您可爱的小猪吧~',buttonText:"去想看领取"},lucky6:{icon:"star",title:"太幸运了",description:"恭喜您抽中新人专享的6元现金红包，可当日提现，赶紧去想看领取吧~",buttonText:"去想看领取"},lucky5:{icon:"star",title:"太幸运了",description:"恭喜您抽中新人专享的5元现金红包，可当日提现，赶紧去想看领取吧~",buttonText:"去想看领取"},lucky1:{icon:"star",title:"太幸运了",description:"恭喜您抽中新人专享的1元现金红包，可当日提现，赶紧去想看领取吧~",buttonText:"去想看领取"},badluck:{icon:"badluck",title:"哎呀，手抖了",description:"哎呀，一不小心手抖了\n再来一次吧~",buttonText:"朕知道了"}},o=[{choiceId:1,url:"https://ts.market.mi-img.com/download/Browser/0c7ee589571f62b32dfc3b77e157e0981b2402289/pig.png",dialog:"pig"},{choiceId:2,url:"https://ts.market.mi-img.com/download/Browser/066795896d4767b93bd253a4483f951e751405515/6.png",dialog:"lucky6"},{choiceId:3,url:"https://ts.market.mi-img.com/download/Browser/08679559614d64b970d258a4453f91187873c3e56/1.png",dialog:"lucky1"},{choiceId:4,url:"https://ts.market.mi-img.com/download/Browser/0575415fe53d241dd37d39fd0431a7d04cf66f233/5.png",dialog:"lucky5"},{choiceId:0,url:"https://ts.market.mi-img.com/download/Browser/0c7ee589571f62b32dfc3b77e157e0981b2402289/pig.png",dialog:"pig"},{choiceId:5,url:"https://ts.market.mi-img.com/download/Browser/066795896d4767b938d256a4493f9b1e7e1405515/bad.png",dialog:"badluck"},{choiceId:6,url:"https://ts.market.mi-img.com/download/Browser/0575415fe53d241dd37d39fd0431a7d04cf66f233/5.png",dialog:"lucky5"},{choiceId:7,url:"https://ts.market.mi-img.com/download/Browser/066795896d4767b938d256a4493f9b1e7e1405515/bad.png",dialog:"badluck"}]},"5e9a":function(t,e,i){},"5ffe":function(t,e,i){},"83bf":function(t,e,i){"use strict";var a=i("a5a3"),s=i.n(a);s.a},8772:function(t,e,i){"use strict";var a=i("5ffe"),s=i.n(a);s.a},9991:function(t,e,i){},a1ba:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"gray-mask"},t.$listeners),[t._t("default")],2)},s=[],o={name:"GrayMask",props:{show:{type:[String,Boolean],default:""}},methods:{stopSlide(t){t.preventDefault()}},watch:{show:{handler(t){t?(console.log("禁止滑动"),document.body.addEventListener("touchmove",this.stopSlide,{passive:!1})):(console.log("可以滑动"),document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1}))},immediate:!0}},destroyed(){document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1})}},n=o,c=(i("bccd"),i("2877")),r=Object(c["a"])(n,a,s,!1,null,"4cb2c41a",null);e["a"]=r.exports},a3ae:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",{staticClass:"header"},[i("div",{class:{music:!0,"music-close":!t.music,"music-open":t.music},on:{click:t.closeMusic}}),i("p",{staticClass:"record",on:{click:function(e){return t.goRecord()}}},[t._v("翻倍记录")]),i("p",{staticClass:"ante-count"},[t._v("今日可抽"),i("span",[t._v(t._s(t.leftChance))]),t._v("次")])]),i("turn-table",{ref:"turntable",attrs:{awards:t.awards},on:{start:t.start,stop:t.stop},model:{value:t.luckyId,callback:function(e){t.luckyId=e},expression:"luckyId"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.tip,expression:"tip"}],staticClass:"tip-ante"},[t._v(t._s(t.tip))]),i("div",{staticClass:"footer"},[i("p",{staticClass:"coin"},[t._v("我的金币余量 "),i("span",{staticClass:"left-coin"},[t._v(t._s(t.myCoin))])]),i("div",{staticClass:"wager"},[i("div",{staticClass:"change"},[i("span",{staticClass:"change-item change-tip"},[t._v("当前下注")]),i("span",{ref:"reduceWager",staticClass:"change-item reduce",style:{visibility:t.reduceWagerStatus},on:{click:function(e){return t.reduceWager()}}},[i("i")]),i("span",{staticClass:"change-item wager-coin"},[t._v(t._s(t.currentAnte))]),i("span",{ref:"addWager",staticClass:"change-item add",style:{visibility:t.addWagerStatus},on:{click:function(e){return t.addWager()}}},[t._v("+")])]),i("div",{staticClass:"all-in",on:{click:function(e){return t.allIn()}}})]),i("div",{staticClass:"share",on:{click:function(e){return t.openShareDialog("btn")}}},[t._v("分享多抽一次")]),t._m(0)]),i("gray-mask",{attrs:{show:t.dialogKey},on:{click:function(e){return t.openDialog("")}}},[i("lottery-dialog",{attrs:{title:t.dialog.title,description:t.dialog.description,"button-text":t.dialog.buttonText},on:{"btn-click":t.dialogClickHandler}})],1),i("gray-mask",{attrs:{show:t.showShare},on:{click:function(e){return t.closeShareDialog()}}},[i("div",{staticClass:"share-dialog"},[i("div",{staticClass:"share-item",on:{click:function(e){return t.share("wechat")}}},[i("span",{staticClass:"wechat"}),i("p",[t._v("微信")])]),i("div",{staticClass:"share-item",on:{click:function(e){return t.share("qq")}}},[i("span",{staticClass:"qq"}),i("p",[t._v("QQ")])])])]),i("gray-mask",{attrs:{show:!t.isLogin}},[i("div",{staticClass:"login"},[i("div",{staticClass:"login-icon"}),i("p",[t._v("登录后")]),i("p",[t._v("才能参与金币翻倍哦")]),i("div",{staticClass:"login-btn",on:{click:t.login}})])]),i("gray-mask",{attrs:{show:t.showToast}},[t.luckyItem.choiceDesc<=1?i("div",{staticClass:"award-tip"},[i("div",{staticClass:"award-coin"},[t._v(t._s(t.latestChange))]),i("div",{staticClass:"award-choicedesc"},[t._v(t._s(t.luckyItem.choiceDesc))])]):t._e(),t.luckyItem.choiceDesc>1?i("div",{staticClass:"big-award-tip"},[i("div",{staticClass:"big-award-coin"},[t._v(t._s(t.latestChange.replace("+","")))]),i("div",{staticClass:"big-award-choicedesc"},[t._v(t._s(t.luckyItem.choiceDesc))])]):t._e()]),i("gray-mask",{staticClass:"location-gray",attrs:{show:t.isLogin&&t.locationTip},on:{click:t.closeLocationTip}},[i("div",{staticClass:"location-tip"},[i("div",{staticClass:"location-tip-close"})])])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"guide"},[i("p",{staticClass:"guide-header"},[t._v("- 活动规则 -")]),i("ol",{staticClass:"guide-list"},[i("li",[t._v("1、 拥有金币的登录用户可参与活动。每天固定翻倍次数为15次，分享增加1次机会。")]),i("li",[t._v("2、 每局下注最低500金币，最高8000金币。")]),i("li",[t._v("3、 活动期间，翻倍系数可能会有变更，具体见转盘显示。")]),i("li",[t._v("4、 所获得的金币将自动进入到您的钱包账户，请在【翻倍记录】中查看")]),i("li",[t._v("5、 如发现有盗刷金币用户，将封禁您的账号，必要时将追究法律责任。")]),i("li",[t._v("6、 本活动解释权归想看APP所有")])])])}],o=(i("5319"),i("1184")),n=i("c36a"),c=i("edb0"),r=i("5962"),l=i("42a5"),h=i("6b43"),d=i("a1ba"),u=i("2d5d"),m=i("4330"),g=i("5714"),p={name:"Lottery",components:{TurnTable:u["a"],LotteryDialog:m["a"],GrayMask:d["a"]},data(){return{luckyId:NaN,dialogKey:"",awards:[{choiceId:1,choiceDesc:"3"},{choiceId:2,choiceDesc:"1.5"},{choiceId:3,choiceDesc:"1.3"},{choiceId:4,choiceDesc:"1.1"},{choiceId:5,choiceDesc:"0.9"},{choiceId:6,choiceDesc:"0.7"},{choiceId:7,choiceDesc:"0.4"},{choiceId:8,choiceDesc:"0.2"}],anteMax:0,anteMin:0,currentAnte:200,leftChance:0,latestChange:"+0",myCoin:0,nextCoin:0,dialogMap:g["a"],showShare:!1,showToast:!1,isTodayShared:!1,isLogin:!0,tip:"",turnTableStop:!0,isNew:!1,music:!0,clickAudio:new Audio("https://ts.market.mi-img.com/download/Browser/077215fdaf955f909d9ab39f8929ed42e6741fafa/click.mp3"),roundAudio:new Audio("https://ts.market.mi-img.com/download/Browser/0715c477baa3388bd420961227b7d5b987643ef80/round.mp3"),locationTip:!1,showTipTimmer:0}},computed:{dialog(){return this.dialogMap[this.dialogKey]||{}},luckyItem(){return this.awards.filter(t=>t.choiceId===this.luckyId)[0]||{}},reduceWagerStatus(){return this.currentAnte>this.anteMin?"visible":"hidden"},addWagerStatus(){return this.currentAnte<Math.min(this.anteMax,this.myCoin)?"visible":"hidden"}},methods:{clickMusicPlay(){var t=Object(c["q"])("news_settings_pref","receive_coin_voice_switch",!0);this.music&&t&&this.clickAudio.play()},roundMusicPlay(){var t=Object(c["q"])("news_settings_pref","receive_coin_voice_switch",!0);this.music&&t&&(this.roundAudio.loop=!0,this.roundAudio.play())},musicPause(){try{this.roundAudio.pause(),this.clickAudio.pause()}catch(t){console.log(t)}},start(){this.turnTableStop&&!this.showToast&&(this.clickMusicPlay(),this.leftChance<=0?this.openDialog(this.isTodayShared?"noCount":"share"):this.myCoin<this.currentAnte?this.openDialog("nocoin"):(setTimeout(()=>{this.roundMusicPlay()},500),this.$refs.turntable.start(),this.turnTableStop=!1,o["a"]({ante:this.currentAnte}).then(t=>{this.luckyId=t.choiceId,this.nextCoin=t.myCoin,this.leftChance=t.leftChance,this.latestChange=t.award>0?"+".concat(t.award):"-".concat(t.award),this.isNew=!1}).catch(t=>{this.luckyId=-1,Object(c["H"])(t.msg||"抽奖失败，请再抽一次")})),this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"开始翻倍"}))},stop(){this.musicPause(),-1!==this.luckyId&&(this.myCoin=this.nextCoin,this.myCoin<this.currentAnte&&(this.currentAnte=Math.max(this.anteMin,this.myCoin)),this.showToast=!0,setTimeout(()=>{this.showToast=!1},1500)),this.turnTableStop=!0},goRecord(){this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"翻倍记录"});var t="".concat(location.origin,"/mobile-v2/act/lottery/record");location.href="bikan://web.goto/commonWebView?url_encode=".concat(encodeURIComponent(t))},reduceWager(){var t=this.currentAnte-this.anteMin;t<this.anteMin&&this.showTip("最少下注".concat(this.anteMin,"金币")),this.currentAnte=Math.max(t,this.anteMin),this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"减注"})},addWager(){var t=this.currentAnte+this.anteMin;this.isNew?this.showTip("先押注".concat(this.anteMin,"金币试试吧")):(t>this.anteMax&&this.myCoin>this.anteMax&&this.showTip("最多下注".concat(this.anteMax,"金币")),this.currentAnte=Math.min(t,this.anteMax,this.myCoin),this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"加注"}))},allIn(){this.isNew?this.showTip("先押注".concat(this.anteMin,"金币试试吧")):(this.myCoin>=this.anteMax?(this.showTip("最多下注".concat(this.anteMax,"金币")),this.currentAnte=this.anteMax):this.myCoin<this.anteMin?this.openDialog("nocoin"):this.currentAnte=this.myCoin,this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"全压"}))},openDialog(t){this.dialogKey=t,this.$o2o({e_c:"大转盘",e_a:"曝光",e_n:this.dialog.stat})},dialogClickHandler(){Object(c["z"])(!1),"share"===this.dialogKey?this.openShareDialog("dialog"):this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"弹窗-赚金币"},()=>{location.href="".concat(location.origin,"/mobile-v2/task")},()=>{location.href="".concat(location.origin,"/mobile-v2/task")}),this.openDialog("")},share(t){o["d"]().then(e=>{var i={qq:"1",wechat:"2",moment:"3"};this.leftChance=e.leftChance,this.isTodayShared=!0;var a="".concat(location.origin,"/mobile-v2/act/lottery/share?share=lottery");"2"===i[t]?Object(n["i"])(a):Object(r["k"])({title:"幸运大转盘，好运转出来~",url:a,text:"千万现金红包免费抽，速来参与>>",thumbUrl:"https://ts.market.mi-img.com/download/Browser/0dfcc57b54685de3ec6acf774097c1d5f67406458/logo_to_share.png",socialType:i[t]})}).catch(t=>{Object(c["H"])(t.msg||"调起分享失败，再试一次吧")}),this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"分享",e_x:{share_channel:t}})},openShareDialog(t){this.showShare=!0,"btn"===t?this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"分享多抽一次"}):t&&this.$o2o({e_c:"大转盘",e_a:"点击",e_n:"弹窗-分享"})},closeShareDialog(){this.showShare=!1},login(){try{"bindWx"in window.miui?window.miui.bindWx("lotteryLoginCallback"):Object(c["h"])("lotteryLoginCallback")}catch(t){console.log(t)}},getData(){o["b"]().then(t=>{this.awards=t.choiceList,this.anteMax=t.anteMax,this.anteMin=t.anteMin,this.leftChance=t.leftChance,this.myCoin=t.myCoin,this.isTodayShared=t.isTodayShared,this.isLogin=t.isLogin,this.isNew=t.isNew,this.currentAnte=this.anteMin,this.isLogin||this.$o2o({e_c:"大转盘",e_a:"曝光",e_n:"登录弹窗"}),this.$root.hidePlaceholder()}).catch(()=>{this.$router.replace({name:"error"})})},backKeyHandler(){this.locationTip&&(this.closeLocationTip(),Object(c["z"])(!1)),this.locationTip||this.showShare||this.showToast||this.dialogKey||this.showLocationTip(),this.closeShareDialog(),this.openDialog("")},showTip(t){this.tip=t,clearTimeout(this.showTipTimmer),this.showTipTimmer=setTimeout(()=>{this.tip=""},1500)},closeMusic(){this.music=!this.music,this.musicPause()},closeLocationTip(){this.locationTip=!1},showLocationTip(){"1"===Object(h["a"])("lotteryEnterTip")&&Object(c["D"])(),Object(h["c"])("lotteryEnterTip","1"),this.locationTip=!0}},created(){this.getData(),Object(c["z"])(!0),Object(l["a"])("backKey",this.backKeyHandler),Object(l["a"])("blur",this.musicPause),window.lotteryLoginCallback=t=>{t&&(this.getData(),this.$o2o({e_c:"大转盘",e_a:"成功",e_n:"登录"}))},this.$o2o({e_c:"大转盘",e_a:"曝光",e_n:"首页"})},destroyed(){clearTimeout(this.showTipTimmer)}},b=p,v=(i("4153"),i("2877")),w=Object(v["a"])(b,a,s,!1,null,"63cdd835",null);e["default"]=w.exports},a5a3:function(t,e,i){},bccd:function(t,e,i){"use strict";var a=i("9991"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-6b554c6c.e942487a.js.map