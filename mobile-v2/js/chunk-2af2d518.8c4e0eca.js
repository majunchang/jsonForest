(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2af2d518"],{"06fd":function(t,e,a){"use strict";var i=a("bafa"),n=a.n(i);n.a},"0e2f":function(t,e,a){"use strict";var i=a("643d"),n=a.n(i);n.a},"0e32":function(t,e,a){},"13cb":function(t,e,a){"use strict";var i=a("1d6f"),n=a.n(i);n.a},1632:function(t,e,a){"use strict";var i=a("842c"),n=a.n(i);n.a},"1d6f":function(t,e,a){},"224b":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));a("e6cf");var i=a("0c6d");function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("/api/v1/news/popular",t).then(t=>200!==t.data.status?(Object(i["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("/api/v1/news/poster",t).then(t=>200!==t.data.status?(Object(i["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}},"24d4":function(t,e,a){"use strict";var i=a("0e32"),n=a.n(i);n.a},2597:function(t,e,a){},"2a9a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hot"},[a("div",{staticClass:"header"},[a("div",{staticClass:"logo"},[a("img",{staticClass:"logo-img",attrs:{src:t.userIcon}}),a("div",{staticClass:"designation"})]),a("div",{staticClass:"title"},[a("div",{staticClass:"name"},[t._v("专属今日头条")]),a("div",{staticClass:"desc"},[t._v(t._s(t.headerCard))])]),a("div",{staticClass:"calendar"},[a("div",{staticClass:"day"},[t._v(" "+t._s(t.date.day)+" ")]),a("div",{staticClass:"solar"},[t._v(t._s(t.date.solar))]),a("div",{staticClass:"lunar"},[t._v(t._s(t.date.lunar))]),a("div",{staticClass:"year"},[t._v(t._s(t.date.year)+" "),a("span",{staticClass:"animail"},[t._v(t._s(t.date.animal))])])])]),a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getNews},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return a("card",{key:t.millisAtStartOfDay,attrs:{title:t.title,documents:t.documentList,limit:t.foldCount}})})),1),a("div",{staticClass:"van-more"}),a("div",{staticClass:"footer",on:{click:t.toMakeMyCard}},[a("div",{staticClass:"footer-btn"},[t._v(" 点击制作 ")])])],1)},n=[],s=(a("e260"),a("ddb0"),a("3126")),r=a("c36a"),o=a("224b"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.documents.length>0?a("div",{staticClass:"card border-top"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[a("div",{staticClass:"logo"}),a("div",{staticClass:"name"},[t._v(t._s(t.title))])]),a("div",{staticClass:"news-list"},t._l(t.list,(function(e){return a("news-item",{key:e.docid,staticClass:"news-item",attrs:{item:e},on:{click:function(a){return t.handleClickNewsItem(e)}}})})),1),t.hasMore&&!t.isShowAll?a("div",{staticClass:"more"},[a("div",{staticClass:"more-btn",on:{click:t.showMore}},[t._v("查看更多")])]):t._e()])]):t._e()},l=[],m=(a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.itemStyleMap[t.itemStyle],t._g({tag:"component",attrs:{item:t.item}},t.$listeners))}),u=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("news-container",t._g({staticClass:"text",attrs:{item:t.item}},t.$listeners),[a("div",{staticClass:"title-container"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.title))])]),a("div",{staticClass:"footer-container"},[a("news-footer",{attrs:{"author-name":t.item.authorName,"comment-count":t.item.commentCount,"publish-time":t.item.publishTime}})],1)])},h=[],f=a("db49"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"news-container Hairline Hairline_bottom"},t.$listeners),[t._t("default")],2)},g=[],b={name:"NewsContainer"},C=b,p=(a("13cb"),a("2877")),_=Object(p["a"])(C,v,g,!1,null,"045a55ad",null),w=_.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"news-footer"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.authorName,expression:"authorName"}]},[t._v(t._s(t.authorName))]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.commentCount,expression:"commentCount"}]},[t._v(t._s(t.commentCount)+"评论")])])},y=[],O={name:"NewsFooter",props:{authorName:{type:String,default:""},commentCount:{type:[Number,String],default:0}}},j=O,k=(a("06fd"),Object(p["a"])(j,I,y,!1,null,"4307dcdc",null)),N=k.exports,S={components:{NewsContainer:w,NewsFooter:N},props:{item:{type:Object,default:()=>({})}},data(){return{defaultImage:f["a"].default.cover}},computed:{images(){return this.item.images||[]}}},$={name:"TextItem",mixins:[S]},x=$,D=(a("24d4"),Object(p["a"])(x,d,h,!1,null,"5eb56b2e",null)),T=D.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("news-container",t._g({staticClass:"single-img",attrs:{item:t.item}},t.$listeners),[a("div",{staticClass:"title-container"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.title))]),a("news-footer",{attrs:{"author-name":t.item.authorName,"comment-count":t.item.commentCount,"publish-time":t.item.publishTime}})],1),a("div",{staticClass:"img-container"},[a("div",{staticClass:"img",style:{backgroundImage:"url("+(t.images[0]||t.defaultImage)+")"}})])])},A=[],L={name:"SingleImgItem",mixins:[S]},E=L,H=(a("4bed"),Object(p["a"])(E,M,A,!1,null,"70a35e64",null)),P=H.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("news-container",t._g({staticClass:"large-img",attrs:{item:t.item}},t.$listeners),[a("div",{staticClass:"title-container"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.title))])]),a("div",{staticClass:"img-container"},[a("div",{staticClass:"img",style:{backgroundImage:"url("+t.images[0]+")"}})]),a("div",{staticClass:"footer-container"},[a("news-footer",{attrs:{"author-name":t.item.authorName,"comment-count":t.item.commentCount,"publish-time":t.item.publishTime}})],1)])},F=[],J={name:"LargeImgItem",mixins:[S]},U=J,R=(a("1632"),Object(p["a"])(U,B,F,!1,null,"27ba4088",null)),V=R.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("news-container",t._g({staticClass:"three-img",attrs:{item:t.item}},t.$listeners),[a("div",{staticClass:"title-container"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.title))])]),a("div",{staticClass:"img-container"},t._l(t.images,(function(t){return a("div",{key:t,staticClass:"img",style:{backgroundImage:"url("+t+")"}})})),0),a("div",{staticClass:"footer-container"},[a("news-footer",{attrs:{"author-name":t.item.authorName,"comment-count":t.item.commentCount,"publish-time":t.item.publishTime}})],1)])},q=[],K={name:"ThreeImgItem",mixins:[S],computed:{images(){return this.item.images?this.item.images.slice(0,3):[]}}},W=K,z=(a("d90a"),Object(p["a"])(W,Y,q,!1,null,"9275d9b2",null)),G=z.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("news-container",t._g({staticClass:"video-inline",attrs:{item:t.item}},t.$listeners),[a("div",{staticClass:"title-container"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.title))])]),a("div",{staticClass:"img-container"},[a("div",{staticClass:"poster",style:{backgroundImage:"url("+t.images[0]+")"}},[a("div",{staticClass:"play"})])]),a("div",{staticClass:"footer-container"},[a("news-footer",{attrs:{"author-name":t.item.authorName,"comment-count":t.item.commentCount,"publish-time":t.item.publishTime}})],1)])},X=[],Z={name:"ThreeImgItem",mixins:[S]},tt=Z,et=(a("8bc4"),Object(p["a"])(tt,Q,X,!1,null,"0d5f7722",null)),at=et.exports,it={name:"NewsItem",components:{TextItem:T,SingleImgItem:P,LargeImgItem:V,ThreeImgItem:G,VideoInlineItem:at},props:{item:{type:Object,default:()=>({})}},computed:{itemStyle(){return"0"===this.item.style?0:1}},data(){return{itemStyleMap:{0:"TextItem",1:"SingleImgItem",2:"LargeImgItem",3:"ThreeImgItem",inline_video_item:"videoInlineItem",short_video_item:"videoInlineItem"}}}},nt=it,st=Object(p["a"])(nt,m,u,!1,null,null,null),rt=st.exports,ot=a("6b43"),ct="readNewsCount",lt="亲爱的朋友,清晨第一缕阳光，赐予我们智慧与梦想，幸运永远属于拥有明智选择的人。",mt="todayHotNews",ut="CK1429645648411",dt="https://ts.market.mi-img.com/download/Browser/0dfcc57b54685de3ec6acf774097c1d5f67406458/logo_to_share.png",ht={name:"HotCard",components:{NewsItem:rt},props:{title:{type:String,default:"今日热点"},documents:{type:Array,default:()=>[]},limit:{type:Number,default:3}},data(){return{isShowAll:!1,limitCount:3}},computed:{list(){return this.isShowAll?this.documents:this.limit?this.documents.slice(0,this.limit):this.documents},count(){return this.documents.length},hasMore(){return this.count>this.limit}},methods:{showMore(){this.isShowAll=!0},handleClickNewsItem(t){var e=JSON.parse(Object(ot["a"])(ct)||"{}"),a=e.count||0,i=new Date,n=new Date(e.time),o=this.isSameDay(i,n);o||Object(ot["b"])(ct),a>=this.limitCount||"video"===t.type?Object(r["a"])(Object(s["a"])(t.type,t.docId)):(Object(ot["c"])(ct,JSON.stringify({count:a+1,time:i})),location.href="".concat(t.shareUrl,"&backflow=0"))},isSameDay(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}}},ft=ht,vt=(a("0e2f"),Object(p["a"])(ft,c,l,!1,null,"57d4b01c",null)),gt=vt.exports,bt={name:"Hot",components:{Card:gt},data(){return{list:[],millisAtStartOfDay:null,loading:!1,finished:!1,userIcon:"",headerCard:lt,date:{day:"",solar:"",lunar:"",year:"",animal:""}}},created(){this.$root.setBackflow(),this.getHotCardContent(),this.$o2o({e_c:"专属头条页",e_a:"曝光",e_n:"热点资讯专属头条"})},methods:{getHotCardContent(){var t={sharedBy:this.$route.query.sharedBy};Object(o["a"])(t).then(t=>{this.userIcon=t.userInfo&&t.userInfo.headIcon||dt,this.headerCard=t.greet,this.date={day:t.date.day,solar:"".concat(t.date.month,"月").concat(t.date.day,"日"),lunar:"".concat(t.lunar.month).concat(t.lunar.dayOfMonth),year:t.lunar.year,animal:t.lunar.animal}}).catch(()=>{this.$error()})},getNews(){var t=this.getStartTimestamp();Object(o["b"])({startTime:t}).then(e=>{if(this.loading=!1,this.finished=!e.hasMore,this.list=[...this.list,...e.newsList],this.millisAtStartOfDay=(e.newsList[e.newsList.length-1]||{}).millisAtStartOfDay,!t){var a=this.list[0].documentList[0]||{},i=this.list[0].documentList[1]||{};Object(r["h"])({title:"今日热点资讯精选",summary:"".concat(a.title,";").concat(i.title),pic:a.images?a.images[0]:"",url:location.href})}this.$root.hidePlaceholder()}).catch(()=>{this.$error(this.$route.name)})},getStartTimestamp(){if(!this.millisAtStartOfDay)return null;var t=new Date(this.millisAtStartOfDay);return t.setDate(t.getDate()-1),t.getTime()},toMakeMyCard(){this.$o2o({e_c:"制作按钮",e_a:"点击",e_n:"制作我的专属头条"}),Object(r["a"])(Object(s["b"])(mt),void 0,ut)}}},Ct=bt,pt=(a("a6b8"),Object(p["a"])(Ct,i,n,!1,null,"68e13880",null));e["default"]=pt.exports},3126:function(t,e,a){"use strict";a.d(e,"i",(function(){return s})),a.d(e,"f",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"g",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"h",(function(){return m})),a.d(e,"b",(function(){return u})),a.d(e,"e",(function(){return d})),a.d(e,"a",(function(){return h}));var i=a("db49"),n=a("2d8f");function s(t){var{deepLink:e}=t;return Object(n["b"])("openDeepLink",e)}function r(t){return Object(n["a"])("web.tab/".concat(t))}function o(t){return Object(n["a"])("goto/".concat(t))}function c(t){var{headIcon:e=i["a"].default.userIcon,nickname:a,userId:s}=t;return Object(n["a"])("goto/userInfoDetail?userId=".concat(s,"&headIcon=").concat(encodeURIComponent(e),"&nickName=").concat(a))}function l(t){return"bikan://web.goto/commonWebView?url_encode=".concat(encodeURIComponent(t))}function m(t){location.href=t}function u(t){return"bikan://goto/".concat(t)}function d(){var t="goto/mineTab/task";return Object(n["a"])(t)}function h(t,e){return"bikan://goto/".concat(t,"Detail?docId=").concat(e)}},"4bed":function(t,e,a){"use strict";var i=a("2597"),n=a.n(i);n.a},"643d":function(t,e,a){},"842c":function(t,e,a){},"8bc4":function(t,e,a){"use strict";var i=a("c3b3"),n=a.n(i);n.a},"926a":function(t,e,a){},a6b8:function(t,e,a){"use strict";var i=a("926a"),n=a.n(i);n.a},bafa:function(t,e,a){},c3b3:function(t,e,a){},d5c4:function(t,e,a){},d90a:function(t,e,a){"use strict";var i=a("d5c4"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-2af2d518.8c4e0eca.js.map