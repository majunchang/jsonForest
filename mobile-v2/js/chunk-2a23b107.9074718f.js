(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a23b107"],{1148:function(t,e,a){"use strict";var o=a("a691"),i=a("1d80");t.exports="".repeat||function(t){var e=String(i(this)),a="",s=o(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(a+=e);return a}},"20e9":function(t,e,a){},3410:function(t,e,a){},"408a":function(t,e,a){var o=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=o(t))throw TypeError("Incorrect invocation");return+t}},4106:function(t,e,a){"use strict";var o=a("20e9"),i=a.n(o);i.a},"58c4":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("gray-mask",{attrs:{show:t.show}},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"light"}),a("div",{staticClass:"close",on:{click:t.closeDialog}}),a("h2",{staticClass:"title"},[t._v("悄悄告诉你 赚金币秘籍")]),a("div",{staticClass:"btns"},[a("button",{staticClass:"btn1",on:{click:function(e){return t.goOtherAct("抽免单")}}},[t._v(" 去抽免单 ")]),a("button",{staticClass:"btn2",on:{click:function(e){return t.goOtherAct("领金币")}}},[t._v(" 去领200金币 ")])]),a("p",{staticClass:"back",on:{click:t.goBack}},[t._v(" 继续返回 ")])])])},i=[],s=a("a1ba"),n=a("685a"),c=a("edb0"),r={components:{GrayMask:s["a"]},props:{page:{type:String,default:"PDD商品列表页"},url:{type:String,default:"bikan://web.goto/commonWebView?url_encode=https%3A%2F%2Ffeed.browser.miui.com%2Fmobile-v2%2Fact%2FpddExchange"}},data(){return{show:!0}},created(){this.$o2o({e_c:"挽留弹窗",e_a:"曝光",e_n:this.page})},methods:{closeDialog(){this.$o2o({e_c:"挽留弹窗关闭",e_a:"点击",e_n:this.page}),this.show=!1,this.$emit("close")},goBack(){this.$o2o({e_c:"挽留弹窗继续返回",e_a:"点击",e_n:this.page}),Object(n["g"])()?Object(c["D"])():this.$router.go(-1)},goOtherAct(t){this.$o2o({e_c:"挽留弹窗".concat(t),e_a:"点击",e_n:this.page}),location.href=this.url}}},l=r,d=(a("c058"),a("2877")),u=Object(d["a"])(l,o,i,!1,null,"7eab1b42",null);e["a"]=u.exports},8226:function(t,e,a){},8825:function(t,e,a){"use strict";var o=a("d8d8"),i=a.n(o);i.a},"8e92":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return r}));a("e6cf");var o=a("0c6d");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["b"].get("/api/v4/pinduoduo/goods/search/list",t).then(t=>200!==t.data.status?(Object(o["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["b"].get("/api/v4/pinduoduo/top/goods/list",t).then(t=>200!==t.data.status?(Object(o["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["b"].get("/api/v4/pinduoduo/merchant/list",t).then(t=>200!==t.data.status?(Object(o["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["b"].get("/api/v4/pinduoduo/goods/detail",t).then(t=>200!==t.data.status?(Object(o["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["b"].get("/api/v4/pinduoduo/mall/goods/list",t).then(t=>200!==t.data.status?(Object(o["a"])(t),Promise.reject(t.data)):Promise.resolve(t.data.data))}},9991:function(t,e,a){},a1ba:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"gray-mask"},t.$listeners),[t._t("default")],2)},i=[],s={name:"GrayMask",props:{show:{type:[String,Boolean],default:""}},methods:{stopSlide(t){t.preventDefault()}},watch:{show:{handler(t){t?(console.log("禁止滑动"),document.body.addEventListener("touchmove",this.stopSlide,{passive:!1})):(console.log("可以滑动"),document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1}))},immediate:!0}},destroyed(){document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1})}},n=s,c=(a("bccd"),a("2877")),r=Object(c["a"])(n,o,i,!1,null,"4cb2c41a",null);e["a"]=r.exports},b053:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("div",{class:["top",t.page],attrs:{id:t.page}},[a("div",{staticClass:"back",on:{click:t.backHandler}}),t._t("top")],2),a("div",{staticClass:"content"},[t._t("default")],2),a("div",{class:["bottom",t.page]},[t._v(t._s(t.bottomText))])])},i=[],s=a("6b43"),n=a("685a"),c=a("edb0"),r="pddmall-backdialog",l={props:{bottomText:{type:String,default:""},page:{type:String,default:"channel"}},methods:{backHandler(){"pddMallChannel"===this.$route.name&&this.$o2o({e_c:"首页返回",e_a:"点击",e_n:"PDD商品列表页"}),Object(n["g"])()&&"true"===Object(s["d"])(r)&&"pddMallChannel"===this.$route.name?Object(c["D"])():this.$router.back()}}},d=l,u=(a("4106"),a("2877")),h=Object(u["a"])(d,o,i,!1,null,"6dfae2e1",null);e["a"]=h.exports},b289:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"f",(function(){return c})),a.d(e,"e",(function(){return r})),a.d(e,"g",(function(){return l})),a.d(e,"b",(function(){return d})),a.d(e,"a",(function(){return u}));a("b680");var o=a("6b43"),i=null,s="pddmall-backdialog";function n(t,e){var a=t-e;return Math.round(a)===a?a:a.toFixed(1)}function c(t){i=t}function r(t){"backDialog"===t.state&&i&&(i.dialogShow=!0,Object(o["f"])(s,"true"),window.removeEventListener("popstate",r))}var l=[{optId:-1,optName:"精选"},{optId:-11,optName:"清仓"},{optId:15,optName:"百货"},{optId:4,optName:"母婴"},{optId:1,optName:"食品"},{optId:14,optName:"女装"},{optId:18,optName:"电器"},{optId:1281,optName:"鞋包"},{optId:1282,optName:"内衣"},{optId:16,optName:"美妆"},{optId:743,optName:"男装"},{optId:13,optName:"水果"},{optId:818,optName:"家纺"},{optId:2478,optName:"文具"},{optId:1451,optName:"运动"},{optId:590,optName:"虚拟"},{optId:2048,optName:"汽车"},{optId:1917,optName:"家装"},{optId:2974,optName:"家具"},{optId:3279,optName:"医药"}],d="cashShopInfo",u="fe-config-xiangkan-common"},b680:function(t,e,a){"use strict";var o=a("23e7"),i=a("a691"),s=a("408a"),n=a("1148"),c=a("d039"),r=1..toFixed,l=Math.floor,d=function(t,e,a){return 0===e?a:e%2===1?d(t,e-1,a*t):d(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){r.call({})}));o({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,a,o,c,r=s(this),h=i(t),p=[0,0,0,0,0,0],m="",g="0",v=function(t,e){var a=-1,o=e;while(++a<6)o+=t*p[a],p[a]=o%1e7,o=l(o/1e7)},f=function(t){var e=6,a=0;while(--e>=0)a+=p[e],p[e]=l(a/t),a=a%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var a=String(p[t]);e=""===e?a:e+n.call("0",7-a.length)+a}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(m="-",r=-r),r>1e-21)if(e=u(r*d(2,69,1))-69,a=e<0?r*d(2,-e,1):r/d(2,e,1),a*=4503599627370496,e=52-e,e>0){v(0,a),o=h;while(o>=7)v(1e7,0),o-=7;v(d(10,o,1),0),o=e-1;while(o>=23)f(1<<23),o-=23;f(1<<o),v(1,1),f(2),g=b()}else v(0,a),v(1<<-e,0),g=b()+n.call("0",h);return h>0?(c=g.length,g=m+(c<=h?"0."+n.call("0",h-c)+g:g.slice(0,c-h)+"."+g.slice(c-h))):g=m+g,g}})},bccd:function(t,e,a){"use strict";var o=a("9991"),i=a.n(o);i.a},c058:function(t,e,a){"use strict";var o=a("8226"),i=a.n(o);i.a},c5e9:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("pdd-layout",{attrs:{page:"channel","bottom-text":t.bottomText}},[a("div",{staticClass:"channel"},[a("div",{staticClass:"channel-generalize-banner"}),a("div",{staticClass:"channel-generalize"},t._l(t.generalizeInfo,(function(e,o){return a("div",{key:o,staticClass:"generalize-goods",on:{click:function(a){return t.goGeneralize(e)}}},[a("div",{staticClass:"goods-img",style:{backgroundImage:"url("+e.imgUrl+")"}}),a("div",{staticClass:"generalize-text"},[t._v(t._s(e.text))])])})),0),a("div",{staticClass:"channel-title"},[t._v(" 今日特价福利还剩 "),a("span",{staticClass:"channel-title-countdown"},[a("p",[t._v(" "+t._s(t.countDown.hour))]),t._v(" : "),a("p",[t._v(" "+t._s(t.countDown.minute))]),t._v(" : "),a("p",[t._v(" "+t._s(t.countDown.second))])]),t._v(" 结束 ")]),a("pddMallTabs",{on:{finish:t.finish}})],1),t.dialogShow?a("BackDialog"):t._e()],1)},i=[],s=a("2934"),n=a("6b43"),c=a("58c4"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tabs",{staticClass:"channel-tabs",on:{select:t.selectTab}},t._l(t.tabs,(function(e,o){return a("tab",{key:o,attrs:{selected:0===o,"class-custom":"channel-tab",name:e.optName}},[a("van-list",{attrs:{finished:t.finished,"immediate-check":!1},on:{load:t.getSearchList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("div",{staticClass:"channel-goods-list"},t._l(t.goodlist,(function(e,o){return a("div",{key:o,staticClass:"channel-goods",on:{click:function(a){return t.goGoodsDetail(e.goodsId)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgUrl,expression:"item.imgUrl"}],key:e.goodsId,staticClass:"channel-goods-img"}),a("div",{staticClass:"channel-container"},[a("div",{staticClass:"channel-goods-name"},[t._v(" "+t._s(e.name)+" ")]),a("div",[a("span",{staticClass:"salecount"},[t._v(" 已售"+t._s(e.salesTip)+"件 ")]),a("div",{staticClass:"channel-goods-discounts"},[a("div",{staticClass:"discounts-icon"},[t._v(" 省 ")]),t._v(" "+t._s(e.discount)+"元劵 ")])]),a("div",{staticClass:"channel-goods-info"},[a("div",{staticClass:"sale"},[t._v(" ￥"),a("span",{staticClass:"sale-symbol"},[t._v(t._s(e.computePrice))])]),a("s",{staticClass:"original-sale"},[t._v(" ￥"+t._s(e.originalPrice)+" ")])])])])})),0)])],1)})),1)},l=[],d=(a("e260"),a("ddb0"),a("26a1")),u=a("8e92"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabs"},[a("ul",{attrs:{id:"tabs-ui"}},t._l(t.tabs,(function(e,o){return a("li",{key:o,class:[e.isActive?"active":"",""+e.classCustom]},[a("div",{staticClass:"tab-name",on:{click:function(a){return t.selectTab(e,o)}}},[t._v(t._s(e.name))])])})),0)]),a("div",{staticClass:"tabs-details"},[t._t("default")],2)])},p=[],m={name:"Tabs",data(){return{tabs:[],selectedTabIndex:0}},created(){this.tabs=this.$children},methods:{selectTab(t,e){this.tabs.forEach(e=>{e.isActive=e.name===t.name}),this.$emit("select",{selectedTab:t,index:e})}}},g=m,v=a("2877"),f=Object(v["a"])(g,h,p,!1,null,null,null),b=f.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}]},[t._t("default")],2)},w=[],k={name:"Tab",props:{name:{type:String,required:!0},selected:{type:Boolean,default:!1},classCustom:{type:String,default:""}},data(){return{isActive:!1}},mounted(){this.isActive=this.selected}},x=k,C=Object(v["a"])(x,_,w,!1,null,null,null),I=C.exports,y=a("b289"),T="PDD商品列表页",O="第一屏",S={name:"PDDMallTabs",components:{Tabs:b,Tab:I},created(){this.getOptList()},mounted(){this.computedFixedHeight()},data(){return{tabs:[],goodlist:[],selectedOptId:"",fixedTop:"",page:1,pageSize:10,fixTabs:!1,loading:!1,finished:!1}},watch:{selectedOptId(t,e){if(t!==e){var a=this.getScrollTop();this.page=1,this.goodlist=this.goodlist.map(()=>({goodsId:"",name:"",imgUrl:"",discount:0,salesTip:0,originalPrice:0})),a>this.fixedTop&&this.setScrollTop(this.fixedTop),this.getSearchList()}}},methods:{getOptList(){this.tabs=y["g"],this.selectedOptId=this.tabs[0].optId,this.getSearchList()},computedFixedHeight(){var t=Object(d["b"])("channel-title")[0],e=Object(d["b"])("channel-generalize")[0],a=parseFloat(window.getComputedStyle(t).getPropertyValue("margin-bottom")),o=parseFloat(window.getComputedStyle(e).getPropertyValue("margin-bottom"));this.fixedTop=t.clientHeight+e.clientHeight+a+o},getSearchList(){this.loading=!0,Object(u["d"])({optId:this.selectedOptId,page:this.page,pageSize:this.pageSize}).then(t=>{this.loading=!1,t.length||(this.finished=!0,this.$emit("finish",this.page>1)),t.forEach(t=>{t.computePrice=this.computePrice(t.originalPrice,t.discount)}),1===this.page?this.goodlist=Object.freeze(t):this.goodlist=Object.freeze([...this.goodlist,...t]),this.page+=1}).catch(()=>{this.$error()})},setScrollTop(t){document.documentElement.scrollTop=t,document.body.scrollTop=t},getScrollTop(){return document.body.scrollTop||document.documentElement.scrollTop},selectTab(t){var{index:e}=t;this.$o2o({e_c:"分类点击",e_a:"点击",e_n:T,e_x:{name:this.tabs[e].optName}}),this.selectedOptId=this.tabs[e].optId},goGoodsDetail(t){this.$o2o({e_c:"商品列表",e_a:"点击",e_n:T,e_x:{path:O}}),this.$router.push({name:"pddMallGoodsDetail",query:{goodsId:t}})},computePrice(t,e){return Object(y["c"])(t,e)}}},D=S,j=(a("8825"),Object(v["a"])(D,r,l,!1,null,"1f2a43d4",null)),$=j.exports,N=a("b053"),P="- 今日全部优惠都在上面啦 -",E="- 该分类下暂无优惠商品哦 -",z="PDD商品列表页",F={name:"PDDMallChannel",components:{pddMallTabs:$,pddLayout:N["a"],BackDialog:c["a"]},created(){this.$o2o({e_c:"首页",e_a:"曝光",e_n:z}),this.$root.hidePlaceholder(),this.getApolloInfo(),this.getTime()},data(){return{timer:null,countDown:{hour:"12",minute:"12",second:"12"},generalizeInfo:[],bottomText:"",dialogShow:!1}},mounted(){var t="true"!==Object(n["d"])(y["d"]);t&&Object(y["f"])(this),!this.$router.from.name&&t&&(history.replaceState("backDialog",null,document.URL),history.pushState(null,null,document.URL),window.addEventListener("popstate",y["e"]))},methods:{getApolloInfo(){Object(s["b"])({key:y["a"]}).then(t=>{this.generalizeInfo=t.data.pddMall}).catch(()=>{this.$error()})},goGeneralize(t){t["xiangkan-innerActPath"]?this.$router.push(t.link):window.location.href=t.link,this.$o2o({e_c:"顶部推荐",e_a:"点击",e_n:z,e_x:{name:t.text}})},getTime(){clearTimeout(this.timer),this.computeCountDown()>0&&(this.timer=setTimeout(()=>{this.getTime()},1e3))},computeCountDown(){var t=Date.now(),e=(new Date).setHours(24,0,0,0),a=new Date(e-t-288e5),o=this.checktime(a.getHours()),i=this.checktime(a.getMinutes()),s=this.checktime(a.getSeconds());return this.countDown={hour:o,minute:i,second:s},e-t>0},checktime(t){return t<10?"0".concat(t):t},goShops(){this.$router.push("/act/pddMall/shops")},finish(t){this.bottomText=t?P:E}}},L=F,M=(a("f917"),Object(v["a"])(L,o,i,!1,null,"590ea6f0",null));e["default"]=M.exports},d8d8:function(t,e,a){},f917:function(t,e,a){"use strict";var o=a("3410"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-2a23b107.9074718f.js.map