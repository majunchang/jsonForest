{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.json.to-string-tag.js","webpack:///./node_modules/core-js/modules/es.math.to-string-tag.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/views/withdrawAuth/AuthResult.vue?9731","webpack:///src/views/withdrawAuth/AuthResult.vue","webpack:///./src/views/withdrawAuth/AuthResult.vue?fc20","webpack:///./src/views/withdrawAuth/AuthResult.vue?77ae","webpack:///./node_modules/core-js/modules/es.symbol.to-string-tag.js","webpack:///./src/views/withdrawAuth/AuthResult.vue?522f","webpack:///./src/api/miVerify.js","webpack:///./src/utils/miVerify.js","webpack:///./static/v.js"],"names":["global","setToStringTag","JSON","Math","_typeof","obj","Symbol","iterator","module","exports","constructor","prototype","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_m","width","height","fontSize","fontWeight","on","handleClick","_v","slot","_s","timeLeft","staticRenderFns","component","defineWellKnownSymbol","getRegMethod","data","cb","request","get","then","res","code","console","log","window","miVerify","register","catch","handler","type","initMiverify","regMethod","onSuccess","token","onSuccessRequest","onClose","onCloseRequest","taskTime","withdraw","partnerWithdraw","t","o","r","e","n","i","l","call","m","c","d","Object","defineProperty","enumerable","toStringTag","value","__esModule","create","bind","default","hasOwnProperty","p","s","74","url","a","timeout","u","f","success","fail","timeoutCb","y","Error","v","document","createElement","loaded","head","getElementsByTagName","h","w","b","push","concat","encodeURIComponent","j","parseInt","random","Date","valueOf","g","E","length","join","appendChild","src","readyState","setTimeout","onerror","removeChild","startMiverify","conf","jsVersion","forEach"],"mappings":"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","file":"js/chunk-f486cf58-legacy.00378935.js","sourcesContent":["var global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n// JSON[@@toStringTag] property\n// https://tc39.github.io/ecma262/#sec-json-@@tostringtag\nsetToStringTag(global.JSON, 'JSON', true);\n","var setToStringTag = require('../internals/set-to-string-tag');\n\n// Math[@@toStringTag] property\n// https://tc39.github.io/ecma262/#sec-math-@@tostringtag\nsetToStringTag(Math, 'Math', true);\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"result\"},[_c('nav-bar',{attrs:{\"title\":\"确认兑换\",\"hairline\":false,\"webview\":true}}),_vm._m(0),_c('Button',{attrs:{\"customStyle\":{\n            width: '3.00rem',\n            height: '0.43rem',\n            fontSize: '0.16rem',\n            fontWeight: 'bold',\n        }},on:{\"click\":_vm.handleClick}},[_vm._v(\" 确认兑换 \"),_c('div',{staticClass:\"auth-result__tip\",attrs:{\"slot\":\"desc\"},slot:\"desc\"},[_vm._v(_vm._s(this.timeLeft)+\" 秒后自动兑换\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"auth-result__msg\"},[_c('div',{staticClass:\"auth-result__icon auth-result__icon_success\"}),_c('h1',[_vm._v(\"认证成功!\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"result\">\n        <nav-bar\n            title=\"确认兑换\"\n            :hairline=\"false\"\n            :webview=\"true\" />\n        <div class=\"auth-result__msg\">\n            <div class='auth-result__icon auth-result__icon_success' />\n            <h1>认证成功!</h1>\n        </div>\n        <Button\n            :customStyle=\"{\n                width: '3.00rem',\n                height: '0.43rem',\n                fontSize: '0.16rem',\n                fontWeight: 'bold',\n            }\"\n            @click=\"handleClick\">\n            确认兑换\n            <div\n                class=\"auth-result__tip\"\n                slot=\"desc\">{{ this.timeLeft }} 秒后自动兑换</div>\n        </Button>\n    </div>\n</template>\n\n<script>\nimport NavBar from '@/components/NavBar';\nimport Button from '@/components/Button';\nimport { get, remove } from '@/utils/cache';\nimport { toast, quitCurrentWebview } from '@/utils/jsApiV2/client';\nimport miVerify from '@/utils/miVerify';\nimport { cacheSelectedCashKey } from '../withdraw/config';\nimport withdrawMixin from '../withdraw/withdrawMixin';\nimport '../../../static/v';\n\nexport default {\n    name: 'AuthResult',\n    mixins: [withdrawMixin],\n    components: {\n        NavBar,\n        Button,\n    },\n    data() {\n        return {\n            timeLeft: 3,\n            timer: null,\n            clicked: false,\n        };\n    },\n    created() {\n        this.getVerifyInfo()\n            .then(() => {\n                this.getSelectedCash();\n                this.createTimer();\n                this.$root.hidePlaceholder();\n            });\n\n        this.$o2o({\n            e_c: '提现',\n            e_a: '曝光',\n            e_n: '认证成功',\n            e_x: { id_card: this.$route.query.cardNo },\n        });\n    },\n    destoryed() {\n        clearInterval(this.timer);\n    },\n    methods: {\n        getSelectedCash() {\n            this.selectedCash = JSON.parse(get(cacheSelectedCashKey));\n        },\n        createTimer() {\n            this.timer = setInterval(() => {\n                this.timeLeft -= 1;\n\n                if (this.timeLeft <= 0) {\n                    this.handleTimeEnd();\n                }\n            }, 1000);\n        },\n        getVerifyInfo() {\n            const p = new Promise((resolve) => {\n                miVerify(\n                    { type: '时长任务' },\n                    (verify) => {\n                        window.miVerify.withdraw.verify = verify;\n                        resolve();\n                    },\n                    'withdraw',\n                );\n            });\n\n            return p;\n        },\n        handleClick() {\n            this.$o2o({ e_c: '提现', e_a: '点击', e_n: '去提现' });\n\n            this.clicked = true;\n            this.withdrawHandler(this.handleWithdrawSuccess, this.handleWithdrawError);\n        },\n        handleTimeEnd() {\n            clearInterval(this.timer);\n\n            if (this.selectedCash.type === 'phonenumber') {\n                this.quitAuthResult();\n            } else if (!this.clicked) {\n                this.withdrawHandler(this.handleWithdrawSuccess, this.handleWithdrawError);\n            }\n        },\n        handleWithdrawSuccess(res) {\n            if (this.selectedCash.type === 'wechat') {\n                this.$o2o({\n                    e_c: '提现',\n                    e_a: '成功',\n                    e_n: '提现成功',\n                    e_x: {\n                        string_type: `微信${this.selectedCash.cash / 100}元`,\n                    },\n                });\n\n                this.commitWithdraw(res);\n            }\n\n            return this.quitAuthResult();\n        },\n        handleWithdrawError(res) {\n            toast(res.msg || (res.data && res.data.msg) || '提现失败');\n            this.quitAuthResult();\n        },\n        quitAuthResult() {\n            /*\n                * 这里只删除微信提现缓存，因为产品要求如果用户一开始选择话费，返回提现页面后要弹出手机号输入框\n                * 返回提现页面后弹出手机号输入框的判断条件：\n                * 1. isAuth由false变为true\n                * 2. 用户选择了话费\n                * 3. 缓存中的类型为话费\n            */\n            if (this.selectedCash.type === 'wechat') {\n                remove(cacheSelectedCashKey);\n            }\n\n            quitCurrentWebview();\n        },\n    },\n};\n</script>\n\n<style scoped>\n.result {\n    height: 100%;\n}\n\n.auth-result__msg {\n    display: flex;\n    width: 100%;\n    margin: 101px 0 48px 0;\n    flex-direction: column;\n    align-items: center;\n}\n\n.auth-result__icon {\n    width: 60px;\n    height: 60px;\n    background-size: 60px 60px;\n    background-repeat: no-repeat;\n}\n\n.auth-result__icon_success {\n    background-image: url(./image/success.png);\n}\n\n.auth-result__msg h1 {\n    margin: 17px 0 0 0;\n    text-align: center;\n    font-weight: normal;\n    font-size: 19px;\n}\n\n.auth-result__tip {\n    font-size: 11px;\n    font-weight: normal;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AuthResult.vue?vue&type=template&id=317d11e1&scoped=true&\"\nimport script from \"./AuthResult.vue?vue&type=script&lang=js&\"\nexport * from \"./AuthResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AuthResult.vue?vue&type=style&index=0&id=317d11e1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"317d11e1\",\n  null\n  \n)\n\nexport default component.exports","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.toStringTag` well-known symbol\n// https://tc39.github.io/ecma262/#sec-symbol.tostringtag\ndefineWellKnownSymbol('toStringTag');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthResult.vue?vue&type=style&index=0&id=317d11e1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthResult.vue?vue&type=style&index=0&id=317d11e1&scoped=true&lang=css&\"","// import axios from 'axios';\nimport request from './request';\n\nexport function getRegMethod(data) {\n    return (cb) => {\n        // instance.defaults.headers.post['Content-Type'] = 'application/json';\n        request.get('/api/v4/sec/captcha/register', data)\n            .then((res) => {\n                if (res.data.code === 0) {\n                    console.log('Register success!');\n                    if (typeof cb === 'function') {\n                        cb(res.data.data);\n                        window.miVerify.register = true;\n                    }\n                } else {\n                    console.log('Register callback error!');\n                    window.miVerify.register = false;\n                }\n            })\n            .catch((res) => {\n                console.log('Register request error!');\n                window.miVerify.register = false;\n                console.log(res);\n            });\n    };\n}\n\nexport function test() { }\n","import { getRegMethod } from '../api/miVerify';\n\n/**\n * https://wiki.n.miui.com/pages/viewpage.action?pageId=73330071\n *\n * @author 文桥 <wenqiao1@xiaomi.com>\n * @export\n * @param {Functuon} handler(verifyObj)\n */\nexport default function miVerify(data, handler, type) {\n    // 在页面加载完成后尽可能早的调用初始化方法，以搜集更多的信息，注意：对于一项验证只需初始化一次!!!\n    window.initMiverify(\n        {\n            // 和业务方后端约定的注册验证服务的API，http method默认为get。不满足需求的可以使用regMethod。\n            // registerApi: '/biz/register',\n            // 如果后端对请求格式有要求或http method为其他方式的，\n            // 可以传入自定义的注册函数，参数中传入返回格式化好的response的callback，\n            // 参见下面的regMethod示例。有此参数时就不用再传registerApi这个参数\n            regMethod: getRegMethod(data),\n            onSuccess: function onSuccess(token) { // 成功回调\n                console.log('Verify success!');\n                console.log(token);\n                // 4. 二次验证 start\n                // 此时成功只是客户端与人机验证平台获取了成功的结果\n                // 为避免作恶者篡改结果，还需要业务方 Server 与人机验证平台Server进行二次验证\n                // if (typeof onSuccessRequest === 'function') {\n                //     onSuccessRequest(token);\n                // }\n                window.miVerify[type].onSuccessRequest(token);\n                // 二次验证 end\n            },\n            // 交互验证关闭的回调，code标志不同情况\n            onClose: function onClose(code) {\n                console.log('Verifying close!');\n                // code 关闭原因：0 验证成功，1 用户手动关闭，2 eventId 过期，3 系统错误\n                console.log(code);\n                // if (typeof onCloseRequest === 'function') {\n                //     onCloseRequest(code);\n                // }\n                window.miVerify[type].onCloseRequest(code);\n            },\n        },\n        handler,\n    );\n}\n\nwindow.miVerify = {\n    taskTime: {},\n    withdraw: {},\n    partnerWithdraw: {},\n};\n// window.miVerify.taskTime.onSuccessRequest = () => {\n//     console.log('taskTime.onSuccessRequest');\n// };\n// window.miVerify.taskTime.onCloseRequest = () => {\n//     console.log('taskTime.onCloseRequest');\n// };\n\n// window.miVerify.withdraw.onSuccessRequest = () => {\n//     console.log('withdraw.onSuccessRequest');\n// };\n// window.miVerify.withdraw.onCloseRequest = () => {\n//     console.log('withdraw.onCloseRequest');\n// };\n\n// miVerify({ type: '时长任务' }, (verify) => {\n//     window.miVerify.taskTime.verify = verify;\n// }, window.miVerify.taskTime.onSuccessRequest, window.miVerify.taskTime.onCloseRequest);\n\n// miVerify({ type: '提现' }, (verify) => {\n//     window.miVerify.withdraw.verify = verify;\n// }, window.miVerify.withdraw.onSuccessRequest, window.miVerify.withdraw.onCloseRequest);\n","!function(t){var o={};function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&\"object\"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:n}),2&e&&\"string\"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,\"a\",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p=\"\",r(r.s=74)}({74:function(e,n){function t(e,n){var t={};for(var o in n)o in t||(e[o]=n[o]);return e}function o(e){var n=e.url,t=void 0===n?\"\":n,o=e.type,r=void 0===o?\"js\":o,i=e.data,c=void 0===i?{}:i,a=e.timeout,u=void 0===a?6e4:a,f=e.success,d=void 0===f?function(){}:f,l=e.fail,s=void 0===l?function(e){throw e}:l,p=e.timeoutCb,y=void 0===p?function(e){throw e}:p;if(\"function\"!=typeof d)throw new Error(\"传入的success fn 错误\");if(\"function\"!=typeof s)throw new Error(\"传入的fail fn 错误\");if(\"function\"!=typeof y)throw new Error(\"传入的timeoutCb fn 错误\");var v=document.createElement(\"script\");v.loaded=!1;var m=document.head||document.getElementsByTagName(\"head\")[0],h=\"onload\"in v?\"onload\":\"onreadystatechange\",w=[];for(var b in c)w.push(\"\".concat(encodeURIComponent(b),\"=\").concat(encodeURIComponent(c[b])));if(\"jsonp\"===r){var j=parseInt(1e4*Math.random(),10)+(new Date).valueOf(),g=\"miVerify_\".concat(j);w.push(\"callback=miVerify_\".concat(j)),window[g]=function(e){v.loaded=!0,d(e)}}var E=t;0<w.length&&(E=\"\".concat(t,\"?\").concat(w.join(\"&\"))),m.appendChild(v),v.src=E,v[h]=function(){v.readyState&&\"loaded\"!==v.readyState&&\"complete\"!==v.readyState||\"js\"===r&&(v.loaded=!0,setTimeout(function(){d()},100))},v.onerror=function(){s(new Error(\"初始化人机服务失败\")),m.removeChild(v),v=null},setTimeout(function(){v&&!v.loaded&&(s(new Error(\"初始化人机服务超时\")),y())},u)}var r=[],i=null;window.initMiverify=function(e,n){if(!e)throw new Error(\"请传入人机识别配置\");if(\"function\"!=typeof n)throw new Error(\"请传入人机识别回调函数\");i?window.startMiverify(t(e,i),n):r.push({conf:e,handler:n})};o({url:\"https://verify.sec.xiaomi.com/captcha/config\",data:{type:1},type:\"jsonp\",success:function(e){o({url:\"https://static.verify.sec.xiaomi.com/js/\".concat(e.jsVersion,\"/miVerify.min.js\"),success:function(){i=e,r.forEach(function(e){window.startMiverify(t(e.conf,i),e.handler)})}})}})}});\n"],"sourceRoot":""}