(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9dedfaa4"],{"0632":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isShowNavbar()?a("nav-bar",{staticClass:"title-bar",attrs:{title:"邀请身边好友赚话费","click-back-handler":t.clickBackHandler,"finish-execute":!0,webview:!1,hairline:!1}}):t._e(),a("div",{staticClass:"sms-linkman-title"},[t.linkmanData.length?a("div",{staticClass:"sms-linkman-title-linkmantext"},[a("p",[t._v("成功邀请以下"+t._s(t.linkmanData.length)+"名好友")]),a("p",[t._v("最高可得 "),a("span",{staticClass:"sms-linkman-title-number"},[t._v(t._s(4*t.linkmanData.length))]),t._v(" 元奖励")])]):a("div",{staticClass:"sms-linkman-title-inittext"},[a("p",[t._v("每成功邀请一名好友")]),t._m(0)])]),a("div",{staticClass:"sms-linkman-content"},[t.linkmanModal?a("div",[a("GrayMask",{attrs:{show:t.linkmanModal}},[a("div",{staticClass:"linkman-modal"},[a("div",{staticClass:"linkman-modal-close",on:{click:t.closeLinkmanModal}}),a("div",{staticClass:"linkman-modal-title"},[t._v("请打开读取联系人权限")]),a("div",{staticClass:"linkman-modal-content"}),a("div",{staticClass:"linkman-modal-footer",on:{click:t.getContactList}},[t._v("开启权限+500金币")]),a("p",{staticClass:"linkman-modal-footer-declare"},[t._v(" 开启即代表您已阅读并同意 "),a("span",{on:{click:t.openPrivacyWebview}},[t._v("隐私政策")])])])])],1):t.linkmanModal||t.linkmanAuth?!t.linkmanRequing&&t.linkmanAuth?a("Smslinkman",{attrs:{linkman:t.linkmanData},on:{batchInvite:t.batchInvite,openSuccessSendMsg:t.openSuccessSendMsg}}):t._e():a("div",{staticClass:"refuse-linkman"},[a("div",{staticClass:"refuse-linkman-banner"}),t._m(1),a("div",{staticClass:"refuse-linkman-btn",on:{click:t.refuseLinkManBtn}},[t._v(" 识别好友领现金 ")]),a("p",{staticClass:"linkman-modal-footer-declare"},[t._v(" 开启即代表您已阅读并同意 "),a("span",{on:{click:t.openPrivacyWebview}},[t._v("隐私政策")])]),a("div",{staticClass:"linkman-watermark"})]),t.linkmanRequing&&t.linkmanAuth?a("div",[a("div",{staticClass:"loading"},[t._v(" 正在获取联系人请稍后.... ")]),a("div",{staticClass:"linkman-watermark"})]):t._e()],1),a("GrayMask",{attrs:{show:t.successSendMsg}},[a("div",{staticClass:"sendMsg-modal"},[a("div",{staticClass:"sendMsg-modal-close",on:{click:t.closeSendMsgModal}}),a("div",{staticClass:"sendMsg-modal-title"},[a("p",{staticClass:"sendMsg-banner"},[t._v("短信发送成功")]),a("p",[t._v("快去告诉好友如何赚红包吧！")])]),a("div",{staticClass:"sendMsg-modal-content"},t._l(t.smsSuccessText,(function(e,n){return a("div",{key:n,staticClass:"sndeMsg-success-text"},[a("div",{staticClass:"sndeMsg-success-text-serial"},[t._v(" "+t._s(n+1)+" ")]),a("span",{staticClass:"success-text",domProps:{innerHTML:t._s(e)}})])})),0),a("div",{staticClass:"sendMsg-modal-footer",on:{click:t.webchatRemind}},[a("div",{staticClass:"sendMsg-modal-footer-img"}),t._v(" 微信提醒 ")])])]),a("GrayMask",{attrs:{show:t.updateVersionModal}},[a("div",{staticClass:"update-modal"},[a("div",{staticClass:"linkman-modal-title"},[t._v("请升级到最新APP版本")]),a("div",{staticClass:"update-modal-content"}),a("div",{staticClass:"update-modal-btn",on:{click:t.updateVersion}},[t._v(" 立即升级 ")])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("你和好友都可得"),a("span",{staticClass:"sms-linkman-title-number"},[t._v("4")]),t._v("元奖励")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"refuse-linkman-content"},[a("p",{staticClass:"title"},[t._v("发现你潜力巨大")]),a("p",[t._v("邀请通讯录好友可得高额现金")])])}],s=(a("4e82"),a("5319"),a("ade3")),c=a("e590"),o=a("a1ba"),r=a("685a"),l=a("42a5"),d=a("db49"),u=a("edb0"),h=a("5962"),m=a("b7d5"),v=a("c36a"),k=a("d3ea"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.linkmanData.length?a("div",{staticClass:"sms-linkman-content"},t._l(t.linkmanData,(function(e,n){return a("div",{key:n,staticClass:"linkman",on:{click:function(e){return t.choose(n)}}},[a("div",{class:[e.checked?"checked":"uncheck",e.status===t.invited?"disabled-check":"","checkbox"]}),a("div",{staticClass:"left"},[a("div",{staticClass:"linkman-name"},[t._v(" "+t._s(t.limitLength(e.name,6))+" ")]),a("div",{staticClass:"linkman-phone"},[t._v(" "+t._s(e.phone)+" ")])]),a("div",{class:[e.status===t.uninvite?"inviting":"uninvite","linkman-status"],on:{click:function(a){return a.stopPropagation(),t.select(e)}}},[t._v(" "+t._s(t.computeStatus(e.status))+" ")])])})),0):a("div",{staticClass:"sms-link-nolinkman"},[a("p",[t._v("通讯录暂无可用联系人")])]),a("div",{staticClass:"sms-linkman-footer"},[a("div",{staticClass:"linkman-footer-left"},[a("div",{class:[t.checkAll?"checked":"uncheck","check-all"],on:{click:t.selectAll}}),t._v(" 全选 ")]),a("div",{staticClass:"linkman-footer-right"},[t._v(" 预计得到 "),a("span",{staticStyle:{color:"#fa4137"}},[t._v("￥")]),a("div",{class:[t.selectData.length?"linkman-footer-select-btn":"linkman-footer-unselect-btn","linkman-footer-btn"],on:{click:t.batchInviteClick}},[t._v(" 批量邀请 ")]),a("span",{staticClass:"linkman-footer-price"},[t._v(t._s(t.price))])])])])},f=[];function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={name:"Smslinkman",props:{linkman:{type:Array,default(){return[]}}},data(){return{linkmanData:[],checkAll:!1,invited:1,uninvite:0}},created(){this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"短信邀请主页曝光",e_x:{Page:"有权限"}})},computed:{price(){var t=0;return this.linkmanData.map(e=>(t=e.checked?++t:t,e)),4*t},selectData(){return this.linkmanData.filter(t=>t.checked)}},watch:{linkman(t){this.linkmanData=t.map(t=>g({},t,{checked:!1}))}},methods:{limitLength(t,e){return t.length>e?"".concat(t.substr(0,e),"..."):t},computeStatus(t){return t===this.invited?"邀请中...":"邀请+4元"},choose(t){var e=this.linkmanData[t];if(e.status===this.uninvite){e.checked=!e.checked;var a=this.linkmanData.find(t=>t.status===this.uninvite&&!1===t.checked);this.checkAll=!a,this.$set(this.linkmanData,t,e)}},selectAll(){this.checkAll=!this.checkAll,this.linkmanData=this.linkmanData.map(t=>(t.checked=t.status===this.invited?t.checked:this.checkAll,t))},batchInviteClick(){if(this.selectData.length)return this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"批量邀请"}),void this.$emit("batchInvite",this.selectData);Object(u["H"])("请先勾选当前联系人哦！")},select(t){t.status!==this.invited?(this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"邀请加8元"}),this.$emit("batchInvite",[t])):this.$emit("openSuccessSendMsg")}}},C=_,O=(a("06e3"),a("2877")),j=Object(O["a"])(C,p,f,!1,null,"4de8e2d6",null),y=j.exports;function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P="clientCheckContactsPermission",M="clientCheckPermissionAndGetContactList",D="clientGetContactsInfo",$=[],x=[],A=0,L={name:"SmsInvite",components:{NavBar:c["a"],GrayMask:o["a"],Smslinkman:y},data(){return{userInfo:{},needUpdate:d["a"].versionCode<40780,linkmanModal:!1,linkmanAuth:!1,linkmanRequing:!0,prevLinkManDara:[],linkmanData:[],successSendMsg:!1,smsSuccessText:k["smsSuccessText"],invitationCode:"",smsTpl:"",url:"",updateVersionModal:!1,acceptTimers:0}},created(){this.$root.hidePlaceholder(),this.needUpdate?this.updateVersionModal=!0:(this.userInfo=Object(u["t"])(),this.getCodeAndShareUrl(),window.clientCheckContactsPermission=this.clientCheckContactsPermission,window.clientCheckPermissionAndGetContactList=this.clientCheckPermissionAndGetContactList,window.clientGetContactsInfo=this.clientGetContactsInfo,Object(u["z"])(!0),Object(l["a"])("backKey",this.backKeyHandler))},destroyed(){Object(u["z"])(!1),Object(l["f"])("backKey",this.backKeyHandler)},methods:{getCodeAndShareUrl(){Object(m["i"])().then(t=>{this.invitationCode=t.invitationCode,this.url="".concat(window.location.origin,"/mobile-v2/act/invitation/smspage?shareId=").concat(this.invitationCode),this.invitationCode?(Object(h["a"])(P),Object(v["d"])(this.url).then(e=>{this.smsTpl=t.smsTpl.replace(/url/,e)}).catch(()=>{this.$error()})):Object(u["h"])("location.reload")}).catch(()=>{this.$error()})},backKeyHandler(){this.$router.push("/act/invitation")},clickBackHandler(){this.$router.push("/act/invitation")},openPrivacyWebview(){Object(u["A"])("http://www.xiangkannews.cn/privacy")},refuseLinkManBtn(){this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"识别好友领现金点击"}),this.getContactList()},clientCheckContactsPermission(t){t?this.getContactList():(this.linkmanModal=!t,this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"打开权限弹窗曝光"}))},getContactList(){this.invitationCode?Object(h["b"])(M):Object(u["h"])("location.reload")},clientCheckPermissionAndGetContactList(t){if(!t.accept)return this.acceptTimers+=1,void(this.acceptTimers%3===0&&Object(u["H"])("请前往设置页面开启联系人访问权限"));this.linkmanModal=!1,this.linkmanAuth=!0,this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"打开权限弹窗点击"}),t.isChanged?Object(m["l"])({list:JSON.stringify(t.data)}).then(()=>{this.linkmanRequing=!0,this.getSmsStatus()}).catch(()=>{this.$error()}):(this.linkmanRequing=!0,this.getSmsStatus())},getSmsStatus(){Object(m["k"])().then(t=>{t.isFinish||A>=10?(this.linkmanRequing=!1,this.handleLinkMan(t.contact||[])):(A+=1,this.getSmsStatus())}).catch(()=>{this.$error()})},openSuccessSendMsg(){this.successSendMsg=!0},handleLinkMan(t){$=Object.keys(t),x=t,Object(h["c"])(JSON.stringify({data:$}),D)},clientGetContactsInfo(t){var e=t.data;this.linkmanData=e.map(t=>S({status:x[t.phoneEncrypt]},t)).sort((t,e)=>e.status-t.status)},closeLinkmanModal(){this.linkmanModal=!1,this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"短信邀请主页曝光",e_x:{Page:"无权限"}})},closeSendMsgModal(){this.successSendMsg=!1},updateVersion(){Object(u["x"])()},isShowNavbar(){return Object(r["g"])()},batchInvite(t){var e=t.map(t=>t.phoneEncrypt);this.linkmanData=this.linkmanData.map(e=>(e.status=this.seekExistInList(e,t)?1:e.status,e)),Object(h["g"])(JSON.stringify({data:e}),this.smsTpl),this.$nextTick(()=>{Object(m["j"])({list:JSON.stringify(e)}).then(()=>{this.successSendMsg=!0,this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"短信发送成功弹框"})}).catch(()=>{this.$error()})})},seekExistInList(t,e){return e.find(e=>e.phoneEncrypt===t.phoneEncrypt)},webchatRemind(){this.successSendMsg=!1,Object(v["i"])(this.url,this.invitationCode),this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"微信提醒"})}}},E=L,I=(a("77ed"),Object(O["a"])(E,n,i,!1,null,"5598861e",null));e["default"]=I.exports},"06e3":function(t,e,a){"use strict";var n=a("ccb4"),i=a.n(n);i.a},"151a":function(t,e,a){},"4fce":function(t,e,a){"use strict";var n=a("151a"),i=a.n(n);i.a},"76cc":function(t,e,a){},"77ed":function(t,e,a){"use strict";var n=a("76cc"),i=a.n(n);i.a},9991:function(t,e,a){},a1ba:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"gray-mask"},t.$listeners),[t._t("default")],2)},i=[],s={name:"GrayMask",props:{show:{type:[String,Boolean],default:""}},methods:{stopSlide(t){t.preventDefault()}},watch:{show:{handler(t){t?(console.log("禁止滑动"),document.body.addEventListener("touchmove",this.stopSlide,{passive:!1})):(console.log("可以滑动"),document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1}))},immediate:!0}},destroyed(){document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1})}},c=s,o=(a("bccd"),a("2877")),r=Object(o["a"])(c,n,i,!1,null,"4cb2c41a",null);e["a"]=r.exports},b7d5:function(t,e,a){"use strict";a.d(e,"f",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return o})),a.d(e,"g",(function(){return r})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return d})),a.d(e,"h",(function(){return u})),a.d(e,"m",(function(){return h})),a.d(e,"l",(function(){return m})),a.d(e,"k",(function(){return v})),a.d(e,"j",(function(){return k})),a.d(e,"i",(function(){return p}));a("e6cf");var n=a("0c6d");function i(t){return n["b"].get("/api/v4/invitation/share",t).then(t=>(200!==t.data.status&&Object(n["a"])(t),Promise.resolve(t)))}function s(t){return n["b"].get("/api/v4/invitation/activity",t).then(t=>(200!==t.data.status&&Object(n["a"])(t),Promise.resolve(t)))}function c(t){return n["b"].get("/api/v4/disciple/my",t).then(t=>(200!==t.data.status&&Object(n["a"])(t),Promise.resolve(t)))}function o(t){return n["b"].post("/api/v4/invitation/preinvited",t)}function r(t){return n["b"].get("/api/v4/invitation/f2f/packetRecords",t).then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function l(){return n["b"].get("/api/v4/invitation/f2f/home").then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].post("/api/v4/invitation/f2f/packet",t)}function u(){return n["b"].get("/api/v4/invitation/f2f/refresh").then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function h(){return n["b"].post("/api/v4/invitation/tutorialAward").then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].post("/api/v4/invitation/sms/upload",t).then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("/api/v4/invitation/sms/status",t).then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].post("/api/v4/invitation/sms/invited",t).then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("/api/v4/invitation/sms/home",t).then(t=>200!==t.data.status?(Object(n["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data))}},bccd:function(t,e,a){"use strict";var n=a("9991"),i=a.n(n);i.a},ccb4:function(t,e,a){},d3ea:function(t,e,a){"use strict";a.r(e),a.d(e,"shareMap",(function(){return n})),a.d(e,"dialogTrackMap",(function(){return i})),a.d(e,"faceTofaceRule",(function(){return s})),a.d(e,"video",(function(){return c})),a.d(e,"smsSuccessText",(function(){return o}));var n={qq:[1,"QQ","QQ邀请","QQ好友"],wechat:[2,"微信","微信邀请","微信好友"],moments:[3,"朋友圈","朋友圈邀请","朋友圈"],face:[-1,"面对面","面对面邀请","面对面分享"],sms:[-1,"短信","短信邀请","短信分享"]},i={remindNotice:"好友提醒师父弹窗",successNotice:"成功邀请弹窗",friendsRemind:"好友提醒分享弹窗"},s=['1. 好友使用微信扫描您的二维码，您可领到<span color="red">100-666</span>金币不等的随机红包，每日最高可领10次，同一微信好友只可领1次；',"2. 若好友（特指想看新用户）通过您的扫码链接下载想看并微信登录，只需连续三天每天认真阅读三条内容以上，您和好友均可领4元邀请奖励，首次邀请成功最高可得5元；","3. 若发现有不正当的手段刷金币行为，平台有权取消该用户已获得奖励并封号处理。"],c={url:"https://ts.market.mi-img.com/download/AppStore/018dac54db0264f8837323595f4a1a97c7450101e",poster:"https://ts.market.mi-img.com/download/AppStore/042185f767a5f7aa7d1376056b7c4c7cc0e4061a8",CSStyle:{width:"100vw",height:"172vw"}},o=["好友通过链接安装想看",'微信登录并<span style="color:#fa4137">绑定手机号</span>','每天认真阅读，各得<span style="color:#fa4137">4元现金</span>']},e590:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{class:"nav-bar "+(t.hairline?"Hairline Hairline_bottom":"")},[a("i",{class:[t.customBack?"nav-bar_backWhite":"nav-bar__back"],on:{click:t.backHandler}}),a("h1",{staticClass:"nav-bar__title",style:t.customTitleStyle},[t._v(t._s(t.title))]),a("div",{staticClass:"nav-bar__info"},[t._t("default")],2)])},i=[],s=a("edb0"),c={name:"NavBar",props:{title:{type:String,default:""},hairline:{type:Boolean,default:!0},finishExecute:{type:Boolean,default:!1},clickBackHandler:{type:Function,default:null},webview:{type:Boolean,default:!0},customBack:{type:Boolean,default:!1},customTitleStyle:{type:Object,default:()=>({})}},methods:{backHandler(){this.clickBackHandler&&(this.clickBackHandler(),this.finishExecute)||(this.webview?Object(s["D"])():this.$router.go(-1))}}},o=c,r=(a("4fce"),a("2877")),l=Object(r["a"])(o,n,i,!1,null,"d8cf0938",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-9dedfaa4.7112383a.js.map