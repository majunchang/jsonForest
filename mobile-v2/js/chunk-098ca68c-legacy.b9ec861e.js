(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-098ca68c"],{"0632":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.isShowNavbar()?e("nav-bar",{staticClass:"title-bar",attrs:{title:"邀请身边好友赚话费","click-back-handler":t.clickBackHandler,"finish-execute":!0,webview:!1,hairline:!1}}):t._e(),e("div",{staticClass:"sms-linkman-title"},[t.linkmanData.length?e("div",{staticClass:"sms-linkman-title-linkmantext"},[e("p",[t._v("成功邀请以下"+t._s(t.linkmanData.length)+"名好友")]),e("p",[t._v("最高可得 "),e("span",{staticClass:"sms-linkman-title-number"},[t._v(t._s(4*t.linkmanData.length))]),t._v(" 元奖励")])]):e("div",{staticClass:"sms-linkman-title-inittext"},[e("p",[t._v("每成功邀请一名好友")]),t._m(0)])]),e("div",{staticClass:"sms-linkman-content"},[t.linkmanModal?e("div",[e("GrayMask",{attrs:{show:t.linkmanModal}},[e("div",{staticClass:"linkman-modal"},[e("div",{staticClass:"linkman-modal-close",on:{click:t.closeLinkmanModal}}),e("div",{staticClass:"linkman-modal-title"},[t._v("请打开读取联系人权限")]),e("div",{staticClass:"linkman-modal-content"}),e("div",{staticClass:"linkman-modal-footer",on:{click:t.getContactList}},[t._v("开启权限+500金币")]),e("p",{staticClass:"linkman-modal-footer-declare"},[t._v(" 开启即代表您已阅读并同意 "),e("span",{on:{click:t.openPrivacyWebview}},[t._v("隐私政策")])])])])],1):t.linkmanModal||t.linkmanAuth?!t.linkmanRequing&&t.linkmanAuth?e("Smslinkman",{attrs:{linkman:t.linkmanData},on:{batchInvite:t.batchInvite,openSuccessSendMsg:t.openSuccessSendMsg}}):t._e():e("div",{staticClass:"refuse-linkman"},[e("div",{staticClass:"refuse-linkman-banner"}),t._m(1),e("div",{staticClass:"refuse-linkman-btn",on:{click:t.refuseLinkManBtn}},[t._v(" 识别好友领现金 ")]),e("p",{staticClass:"linkman-modal-footer-declare"},[t._v(" 开启即代表您已阅读并同意 "),e("span",{on:{click:t.openPrivacyWebview}},[t._v("隐私政策")])]),e("div",{staticClass:"linkman-watermark"})]),t.linkmanRequing&&t.linkmanAuth?e("div",[e("div",{staticClass:"loading"},[t._v(" 正在获取联系人请稍后.... ")]),e("div",{staticClass:"linkman-watermark"})]):t._e()],1),e("GrayMask",{attrs:{show:t.successSendMsg}},[e("div",{staticClass:"sendMsg-modal"},[e("div",{staticClass:"sendMsg-modal-close",on:{click:t.closeSendMsgModal}}),e("div",{staticClass:"sendMsg-modal-title"},[e("p",{staticClass:"sendMsg-banner"},[t._v("短信发送成功")]),e("p",[t._v("快去告诉好友如何赚红包吧！")])]),e("div",{staticClass:"sendMsg-modal-content"},t._l(t.smsSuccessText,(function(n,a){return e("div",{key:a,staticClass:"sndeMsg-success-text"},[e("div",{staticClass:"sndeMsg-success-text-serial"},[t._v(" "+t._s(a+1)+" ")]),e("span",{staticClass:"success-text",domProps:{innerHTML:t._s(n)}})])})),0),e("div",{staticClass:"sendMsg-modal-footer",on:{click:t.webchatRemind}},[e("div",{staticClass:"sendMsg-modal-footer-img"}),t._v(" 微信提醒 ")])])]),e("GrayMask",{attrs:{show:t.updateVersionModal}},[e("div",{staticClass:"update-modal"},[e("div",{staticClass:"linkman-modal-title"},[t._v("请升级到最新APP版本")]),e("div",{staticClass:"update-modal-content"}),e("div",{staticClass:"update-modal-btn",on:{click:t.updateVersion}},[t._v(" 立即升级 ")])])])],1)},i=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("p",[t._v("你和好友都可得"),e("span",{staticClass:"sms-linkman-title-number"},[t._v("4")]),t._v("元奖励")])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"refuse-linkman-content"},[e("p",{staticClass:"title"},[t._v("发现你潜力巨大")]),e("p",[t._v("邀请通讯录好友可得高额现金")])])}],s=(e("a4d3"),e("99af"),e("4de4"),e("7db0"),e("4160"),e("d81d"),e("e439"),e("dbb4"),e("b64b"),e("ac1f"),e("5319"),e("159b"),e("ade3")),c=e("e590"),o=e("a1ba"),r=e("685a"),l=e("42a5"),u=e("db49"),d=e("edb0"),f=e("5962"),m=e("b7d5"),h=e("c36a"),v=e("d3ea"),p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.linkmanData.length?e("div",{staticClass:"sms-linkman-content"},t._l(t.linkmanData,(function(n,a){return e("div",{key:a,staticClass:"linkman",on:{click:function(n){return t.choose(a)}}},[e("div",{class:[n.checked?"checked":"uncheck",n.status===t.invited?"disabled-check":"","checkbox"]}),e("div",{staticClass:"left"},[e("div",{staticClass:"linkman-name"},[t._v(" "+t._s(t.limitLength(n.name,6))+" ")]),e("div",{staticClass:"linkman-phone"},[t._v(" "+t._s(n.phone)+" ")])]),e("div",{class:[n.status===t.uninvite?"inviting":"uninvite","linkman-status"],on:{click:function(e){return e.stopPropagation(),t.select(n)}}},[t._v(" "+t._s(t.computeStatus(n.status))+" ")])])})),0):e("div",{staticClass:"sms-link-nolinkman"},[e("p",[t._v("通讯录暂无可用联系人")])]),e("div",{staticClass:"sms-linkman-footer"},[e("div",{staticClass:"linkman-footer-left"},[e("div",{class:[t.checkAll?"checked":"uncheck","check-all"],on:{click:t.selectAll}}),t._v(" 全选 ")]),e("div",{staticClass:"linkman-footer-right"},[t._v(" 预计得到 "),e("span",{staticStyle:{color:"#fa4137"}},[t._v("￥")]),e("div",{class:[t.selectData.length?"linkman-footer-select-btn":"linkman-footer-unselect-btn","linkman-footer-btn"],on:{click:t.batchInviteClick}},[t._v(" 批量邀请 ")]),e("span",{staticClass:"linkman-footer-price"},[t._v(t._s(t.price))])])])])},k=[];function b(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function g(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?b(Object(e),!0).forEach((function(n){Object(s["a"])(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var _={name:"Smslinkman",props:{linkman:{type:Array,default:function(){return[]}}},data:function(){return{linkmanData:[],checkAll:!1,invited:1,uninvite:0}},created:function(){this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"短信邀请主页曝光",e_x:{Page:"有权限"}})},computed:{price:function(){var t=0;return this.linkmanData.map((function(n){return t=n.checked?++t:t,n})),4*t},selectData:function(){return this.linkmanData.filter((function(t){return t.checked}))}},watch:{linkman:function(t){this.linkmanData=t.map((function(t){return g({},t,{checked:!1})}))}},methods:{limitLength:function(t,n){return t.length>n?"".concat(t.substr(0,n),"..."):t},computeStatus:function(t){return t===this.invited?"邀请中...":"邀请+4元"},choose:function(t){var n=this,e=this.linkmanData[t];if(e.status===this.uninvite){e.checked=!e.checked;var a=this.linkmanData.find((function(t){return t.status===n.uninvite&&!1===t.checked}));this.checkAll=!a,this.$set(this.linkmanData,t,e)}},selectAll:function(){var t=this;this.checkAll=!this.checkAll,this.linkmanData=this.linkmanData.map((function(n){return n.checked=n.status===t.invited?n.checked:t.checkAll,n}))},batchInviteClick:function(){if(this.selectData.length)return this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"批量邀请"}),void this.$emit("batchInvite",this.selectData);Object(d["H"])("请先勾选当前联系人哦！")},select:function(t){t.status!==this.invited?(this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"邀请加8元"}),this.$emit("batchInvite",[t])):this.$emit("openSuccessSendMsg")}}},C=_,O=(e("06e3"),e("2877")),y=Object(O["a"])(C,p,k,!1,null,"4de8e2d6",null),j=y.exports;function w(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function S(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?w(Object(e),!0).forEach((function(n){Object(s["a"])(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):w(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var P="clientCheckContactsPermission",M="clientCheckPermissionAndGetContactList",D="clientGetContactsInfo",$=[],A=[],x=0,L={name:"SmsInvite",components:{NavBar:c["a"],GrayMask:o["a"],Smslinkman:j},data:function(){return{userInfo:{},needUpdate:u["a"].versionCode<40780,linkmanModal:!1,linkmanAuth:!1,linkmanRequing:!0,prevLinkManDara:[],linkmanData:[],successSendMsg:!1,smsSuccessText:v["smsSuccessText"],invitationCode:"",smsTpl:"",url:"",updateVersionModal:!1,acceptTimers:0}},created:function(){this.$root.hidePlaceholder(),this.needUpdate?this.updateVersionModal=!0:(this.userInfo=Object(d["t"])(),this.getCodeAndShareUrl(),window.clientCheckContactsPermission=this.clientCheckContactsPermission,window.clientCheckPermissionAndGetContactList=this.clientCheckPermissionAndGetContactList,window.clientGetContactsInfo=this.clientGetContactsInfo,Object(d["z"])(!0),Object(l["a"])("backKey",this.backKeyHandler))},destroyed:function(){Object(d["z"])(!1),Object(l["f"])("backKey",this.backKeyHandler)},methods:{getCodeAndShareUrl:function(){var t=this;Object(m["i"])().then((function(n){t.invitationCode=n.invitationCode,t.url="".concat(window.location.origin,"/mobile-v2/act/invitation/smspage?shareId=").concat(t.invitationCode),t.invitationCode?(Object(f["a"])(P),Object(h["d"])(t.url).then((function(e){t.smsTpl=n.smsTpl.replace(/url/,e)})).catch((function(){t.$error()}))):Object(d["h"])("location.reload")})).catch((function(){t.$error()}))},backKeyHandler:function(){this.$router.push("/act/invitation")},clickBackHandler:function(){this.$router.push("/act/invitation")},openPrivacyWebview:function(){Object(d["A"])("http://www.xiangkannews.cn/privacy")},refuseLinkManBtn:function(){this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"识别好友领现金点击"}),this.getContactList()},clientCheckContactsPermission:function(t){t?this.getContactList():(this.linkmanModal=!t,this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"打开权限弹窗曝光"}))},getContactList:function(){this.invitationCode?Object(f["b"])(M):Object(d["h"])("location.reload")},clientCheckPermissionAndGetContactList:function(t){var n=this;if(!t.accept)return this.acceptTimers+=1,void(this.acceptTimers%3===0&&Object(d["H"])("请前往设置页面开启联系人访问权限"));this.linkmanModal=!1,this.linkmanAuth=!0,this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"打开权限弹窗点击"}),t.isChanged?Object(m["l"])({list:JSON.stringify(t.data)}).then((function(){n.linkmanRequing=!0,n.getSmsStatus()})).catch((function(){n.$error()})):(this.linkmanRequing=!0,this.getSmsStatus())},getSmsStatus:function(){var t=this;Object(m["k"])().then((function(n){n.isFinish||x>=10?(t.linkmanRequing=!1,t.handleLinkMan(n.contact||[])):(x+=1,t.getSmsStatus())})).catch((function(){t.$error()}))},openSuccessSendMsg:function(){this.successSendMsg=!0},handleLinkMan:function(t){$=Object.keys(t),A=t,Object(f["c"])(JSON.stringify({data:$}),D)},clientGetContactsInfo:function(t){var n=t.data;this.linkmanData=n.map((function(t){return S({status:A[t.phoneEncrypt]},t)})).sort((function(t,n){return n.status-t.status}))},closeLinkmanModal:function(){this.linkmanModal=!1,this.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"短信邀请主页曝光",e_x:{Page:"无权限"}})},closeSendMsgModal:function(){this.successSendMsg=!1},updateVersion:function(){Object(d["x"])()},isShowNavbar:function(){return Object(r["g"])()},batchInvite:function(t){var n=this,e=t.map((function(t){return t.phoneEncrypt}));this.linkmanData=this.linkmanData.map((function(e){return e.status=n.seekExistInList(e,t)?1:e.status,e})),Object(f["g"])(JSON.stringify({data:e}),this.smsTpl),this.$nextTick((function(){Object(m["j"])({list:JSON.stringify(e)}).then((function(){n.successSendMsg=!0,n.$o2o({e_c:"短信邀请",e_a:"曝光",e_n:"短信发送成功弹框"})})).catch((function(){n.$error()}))}))},seekExistInList:function(t,n){return n.find((function(n){return n.phoneEncrypt===t.phoneEncrypt}))},webchatRemind:function(){this.successSendMsg=!1,Object(h["i"])(this.url,this.invitationCode),this.$o2o({e_c:"短信邀请",e_a:"点击",e_n:"微信提醒"})}}},E=L,I=(e("77ed"),Object(O["a"])(E,a,i,!1,null,"5598861e",null));n["default"]=I.exports},"06e3":function(t,n,e){"use strict";var a=e("ccb4"),i=e.n(a);i.a},"151a":function(t,n,e){},"4fce":function(t,n,e){"use strict";var a=e("151a"),i=e.n(a);i.a},"76cc":function(t,n,e){},"77ed":function(t,n,e){"use strict";var a=e("76cc"),i=e.n(a);i.a},"7db0":function(t,n,e){"use strict";var a=e("23e7"),i=e("b727").find,s=e("44d2"),c=e("ae40"),o="find",r=!0,l=c(o);o in[]&&Array(1)[o]((function(){r=!1})),a({target:"Array",proto:!0,forced:r||!l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},9991:function(t,n,e){},a1ba:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",t._g({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"gray-mask"},t.$listeners),[t._t("default")],2)},i=[],s={name:"GrayMask",props:{show:{type:[String,Boolean],default:""}},methods:{stopSlide:function(t){t.preventDefault()}},watch:{show:{handler:function(t){t?(console.log("禁止滑动"),document.body.addEventListener("touchmove",this.stopSlide,{passive:!1})):(console.log("可以滑动"),document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1}))},immediate:!0}},destroyed:function(){document.body.removeEventListener("touchmove",this.stopSlide,{passive:!1})}},c=s,o=(e("bccd"),e("2877")),r=Object(o["a"])(c,a,i,!1,null,"4cb2c41a",null);n["a"]=r.exports},b7d5:function(t,n,e){"use strict";e.d(n,"f",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"d",(function(){return c})),e.d(n,"e",(function(){return o})),e.d(n,"g",(function(){return r})),e.d(n,"a",(function(){return l})),e.d(n,"b",(function(){return u})),e.d(n,"h",(function(){return d})),e.d(n,"m",(function(){return f})),e.d(n,"l",(function(){return m})),e.d(n,"k",(function(){return h})),e.d(n,"j",(function(){return v})),e.d(n,"i",(function(){return p}));e("d3b7");var a=e("0c6d");function i(t){return a["b"].get("/api/v4/invitation/share",t).then((function(t){return 200!==t.data.status&&Object(a["a"])(t),Promise.resolve(t)}))}function s(t){return a["b"].get("/api/v4/invitation/activity",t).then((function(t){return 200!==t.data.status&&Object(a["a"])(t),Promise.resolve(t)}))}function c(t){return a["b"].get("/api/v4/disciple/my",t).then((function(t){return 200!==t.data.status&&Object(a["a"])(t),Promise.resolve(t)}))}function o(t){return a["b"].post("/api/v4/invitation/preinvited",t)}function r(t){return a["b"].get("/api/v4/invitation/f2f/packetRecords",t).then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function l(){return a["b"].get("/api/v4/invitation/f2f/home").then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].post("/api/v4/invitation/f2f/packet",t)}function d(){return a["b"].get("/api/v4/invitation/f2f/refresh").then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function f(){return a["b"].post("/api/v4/invitation/tutorialAward").then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].post("/api/v4/invitation/sms/upload",t).then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("/api/v4/invitation/sms/status",t).then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].post("/api/v4/invitation/sms/invited",t).then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("/api/v4/invitation/sms/home",t).then((function(t){return 200!==t.data.status?(Object(a["a"])(t),Promise.reject(t.data.data)):Promise.resolve(t.data.data)}))}},bccd:function(t,n,e){"use strict";var a=e("9991"),i=e.n(a);i.a},ccb4:function(t,n,e){},d3ea:function(t,n,e){"use strict";e.r(n),e.d(n,"shareMap",(function(){return a})),e.d(n,"dialogTrackMap",(function(){return i})),e.d(n,"faceTofaceRule",(function(){return s})),e.d(n,"video",(function(){return c})),e.d(n,"smsSuccessText",(function(){return o}));var a={qq:[1,"QQ","QQ邀请","QQ好友"],wechat:[2,"微信","微信邀请","微信好友"],moments:[3,"朋友圈","朋友圈邀请","朋友圈"],face:[-1,"面对面","面对面邀请","面对面分享"],sms:[-1,"短信","短信邀请","短信分享"]},i={remindNotice:"好友提醒师父弹窗",successNotice:"成功邀请弹窗",friendsRemind:"好友提醒分享弹窗"},s=['1. 好友使用微信扫描您的二维码，您可领到<span color="red">100-666</span>金币不等的随机红包，每日最高可领10次，同一微信好友只可领1次；',"2. 若好友（特指想看新用户）通过您的扫码链接下载想看并微信登录，只需连续三天每天认真阅读三条内容以上，您和好友均可领4元邀请奖励，首次邀请成功最高可得5元；","3. 若发现有不正当的手段刷金币行为，平台有权取消该用户已获得奖励并封号处理。"],c={url:"https://ts.market.mi-img.com/download/AppStore/018dac54db0264f8837323595f4a1a97c7450101e",poster:"https://ts.market.mi-img.com/download/AppStore/042185f767a5f7aa7d1376056b7c4c7cc0e4061a8",CSStyle:{width:"100vw",height:"172vw"}},o=["好友通过链接安装想看",'微信登录并<span style="color:#fa4137">绑定手机号</span>','每天认真阅读，各得<span style="color:#fa4137">4元现金</span>']},d81d:function(t,n,e){"use strict";var a=e("23e7"),i=e("b727").map,s=e("1dde"),c=e("ae40"),o=s("map"),r=c("map");a({target:"Array",proto:!0,forced:!o||!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},e590:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("header",{class:"nav-bar "+(t.hairline?"Hairline Hairline_bottom":"")},[e("i",{class:[t.customBack?"nav-bar_backWhite":"nav-bar__back"],on:{click:t.backHandler}}),e("h1",{staticClass:"nav-bar__title",style:t.customTitleStyle},[t._v(t._s(t.title))]),e("div",{staticClass:"nav-bar__info"},[t._t("default")],2)])},i=[],s=e("edb0"),c={name:"NavBar",props:{title:{type:String,default:""},hairline:{type:Boolean,default:!0},finishExecute:{type:Boolean,default:!1},clickBackHandler:{type:Function,default:null},webview:{type:Boolean,default:!0},customBack:{type:Boolean,default:!1},customTitleStyle:{type:Object,default:function(){return{}}}},methods:{backHandler:function(){this.clickBackHandler&&(this.clickBackHandler(),this.finishExecute)||(this.webview?Object(s["D"])():this.$router.go(-1))}}},o=c,r=(e("4fce"),e("2877")),l=Object(r["a"])(o,a,i,!1,null,"d8cf0938",null);n["a"]=l.exports}}]);
//# sourceMappingURL=chunk-098ca68c-legacy.b9ec861e.js.map